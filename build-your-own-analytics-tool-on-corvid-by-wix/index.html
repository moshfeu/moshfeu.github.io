<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.23baaba92b155156c265.css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{border:0;clip:rect(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute}[data-reach-skip-nav-link]:focus{padding:1rem;position:fixed;top:10px;left:10px;background:#fff;z-index:1;width:auto;height:auto;clip:auto}body{font-size:18px;line-height:1.5}body:not(.dark-mode){--dark-sky:#53bde6;--light-sky:#cdfdff;--planet-color:#ffe130;--link-color:#007acc;--text-color:inherit;--planet-emoji:"\1F576\FE0F"}body.dark-mode{--dark-sky:#000;--light-sky:#122627;--planet-color:#fff;--link-color:#ffeb00;--text-color:#fffee9;--planet-emoji:"\1F440"}.header-module--header--2EhlL{--radius:60px;--dim:calc(var(--radius)*2);--position:-10px;background:linear-gradient(var(--dark-sky),var(--light-sky));transition:background .2s ease;color:var(--text-color);overflow:hidden;position:relative}.header-module--header--2EhlL .header-module--toggle-dark--fbF-f{background:radial-gradient(var(--radius) circle at var(--radius) var(--radius),var(--planet-color) 50%,transparent 100%);position:absolute;top:0;right:0;height:var(--dim);width:var(--dim);transition:background,color .2s ease;cursor:pointer;border:0;outline:0;padding:0;font-size:40px;transform:rotate(30deg) translate(10px,-50px);color:transparent}.header-module--header--2EhlL .header-module--toggle-dark--fbF-f:focus,.header-module--header--2EhlL .header-module--toggle-dark--fbF-f:hover{color:#000}.header-module--header--2EhlL .header-module--toggle-dark--fbF-f span:before{content:var(--planet-emoji)}.header-module--header--2EhlL a{color:inherit;box-shadow:none;text-decoration:none;display:inline-flex;align-items:center}.footer-module--footer--R2bpz{text-align:center;padding-block:15px;background:#000;box-shadow:0 0 10px #000;color:#b5e853;font-family:monospace}.footer-module--footer--R2bpz:before{content:"";display:block;height:25px;background:radial-gradient(5px circle at 10px 10px,#fe6158 100%,transparent),radial-gradient(5px circle at 27px 10px,#febe2f 100%,transparent),radial-gradient(5px circle at 44px 10px,#28c940 100%,transparent)}.footer-module--footer--R2bpz a,.footer-module--footer--R2bpz a:link,.footer-module--footer--R2bpz a:visited{color:#63c0f5}.layout-module--root--2bezS{display:flex;flex-direction:column;min-height:100vh;color:var(--text-color)}.layout-module--content--15Ymk{flex:1 1;background:linear-gradient(var(--light-sky) 97%,#8ab807 99%,#563a2c 0,#563a2c)}.layout-module--content--15Ymk img{max-width:100%}.layout-module--content--15Ymk a{color:var(--link-color)!important}.code-module--line-number-style--2tWK5{display:inline-block;padding-left:1em;padding-right:1em;-webkit-user-select:none;-ms-user-select:none;user-select:none;opacity:.3;text-align:center;position:relative}img+.em-module--em--KE84c{display:block;text-align:center;font-size:.9rem;padding-block:4px}</style><meta name="generator" content="Gatsby 2.26.1"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><title data-react-helmet="true">Build Your Own Analytics Tool on Corvid by Wix | Moshe Feuchtwanger</title><link data-react-helmet="true" rel="icon" type="image/png" href="/static/avatar-e981c1fbc840d15a0caabe830fa5674f.png"/><link data-react-helmet="true" rel="canonical" href="https://medium.com/swlh/build-your-own-analytics-tool-on-corvid-by-wix-cd12ae76d291"/><meta data-react-helmet="true" name="google-site-verification" content="hpJ5hHMHz7pz5hEBUsKSCUaVIZg8rMKiQ86uyqVuFw4"/><meta data-react-helmet="true" name="description" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" property="og:title" content="Build Your Own Analytics Tool on Corvid by Wix"/><meta data-react-helmet="true" property="og:description" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="Moshe Feuchtwanger"/><meta data-react-helmet="true" name="twitter:title" content="Build Your Own Analytics Tool on Corvid by Wix"/><meta data-react-helmet="true" name="twitter:description" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" name="keywords" content="wix,corvid,javascript,serverless"/><meta data-react-helmet="true" name="og:image" content="https://moshfeu.github.io/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg"/><meta data-react-helmet="true" name="og:image:alt" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" name="twitter:image" content="https://moshfeu.github.io/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg"/><meta data-react-helmet="true" name="twitter:image:alt" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><link href="https://fonts.googleapis.com/css?family=Roboto:wght@300|Open+Sans&amp;display=swap" rel="stylesheet"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-0278ecef0f8e178384ff.js"/><link as="script" rel="preload" href="/framework-a445a942d18bd3dc90d1.js"/><link as="script" rel="preload" href="/app-0d2844e3355ab5c2b7dc.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-00f4cc93568a24184b28.js"/><link as="script" rel="preload" href="/component---src-components-post-js-a55c0f18d4992a8c162c.js"/><link as="fetch" rel="preload" href="/page-data/build-your-own-analytics-tool-on-corvid-by-wix/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2744905544.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090755652.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4064581832.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/764694655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="1t14ewn">body{--theme-ui-colors-text:var(--theme-ui-colors-text,#282c35);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#007acc);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#1B1F23);--theme-ui-colors-muted:var(--theme-ui-colors-muted,hsla(0,0%,0%,0.2));--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,#00ff00);--theme-ui-colors-heading:var(--theme-ui-colors-heading,#282c35);--theme-ui-colors-prism-background:var(--theme-ui-colors-prism-background,#011627);--theme-ui-colors-prism-comment:var(--theme-ui-colors-prism-comment,#809393);--theme-ui-colors-prism-string:var(--theme-ui-colors-prism-string,#addb67);--theme-ui-colors-prism-var:var(--theme-ui-colors-prism-var,#d6deeb);--theme-ui-colors-prism-number:var(--theme-ui-colors-prism-number,#f78c6c);--theme-ui-colors-prism-constant:var(--theme-ui-colors-prism-constant,#82aaff);--theme-ui-colors-prism-punctuation:var(--theme-ui-colors-prism-punctuation,#c792ea);--theme-ui-colors-prism-className:var(--theme-ui-colors-prism-className,#ffc98b);--theme-ui-colors-prism-tag:var(--theme-ui-colors-prism-tag,#ffa7c4);--theme-ui-colors-prism-boolean:var(--theme-ui-colors-prism-boolean,#ff5874);--theme-ui-colors-prism-property:var(--theme-ui-colors-prism-property,#80cbc4);--theme-ui-colors-prism-namespace:var(--theme-ui-colors-prism-namespace,#b2ccd6);--theme-ui-colors-prism-highlight:var(--theme-ui-colors-prism-highlight,hsla(207,95%,15%,1));color:var(--theme-ui-colors-text,#282c35);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,rgba(255,255,255,0.86));--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#232129);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#D9BAE8);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,rgba(255,255,255,0.86));--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,hsla(0,0%,100%,0.2));--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#663399);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fff);}</style><style data-emotion-css="1rckfa9">*{box-sizing:border-box;}body{margin:0;font-family:Open Sans,Roboto,system-ui,sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1awr4tz">.css-1awr4tz{font-family:Open Sans,Roboto,system-ui,sans-serif;}</style><div class="layout-module--root--2bezS css-1awr4tz"><header class="header-module--header--2EhlL"><style data-emotion-css="1gaw1z2">.css-1gaw1z2{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:16px;}</style><div class="css-1gaw1z2"><style data-emotion-css="rsd53u">.css-rsd53u{margin-top:0;margin-bottom:0;font-size:24px;}</style><h1 class="css-rsd53u"><a href="/"><style data-emotion-css="1emx3y6">.css-1emx3y6{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><img src="/static/e981c1fbc840d15a0caabe830fa5674f/aff39/avatar.png" srcSet="/static/e981c1fbc840d15a0caabe830fa5674f/aff39/avatar.png 1x,
/static/e981c1fbc840d15a0caabe830fa5674f/e5b88/avatar.png 1.5x,
/static/e981c1fbc840d15a0caabe830fa5674f/88b72/avatar.png 2x" alt="Moshe Feuchtwanger" class="css-1emx3y6"/>Moshe Feuchtwanger</a></h1></div><button aria-label="Toggle Dark Mode" class="header-module--toggle-dark--fbF-f"><span></span></button></header><div class="layout-module--content--15Ymk"><style data-emotion-css="1in33uw">.css-1in33uw{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1in33uw"><main><article><header><h1 class="css-0">Build Your Own Analytics Tool on Corvid by Wix</h1><style data-emotion-css="1h1xv8c">.css-1h1xv8c{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion-css="dv5tmu">.css-dv5tmu{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-dv5tmu code{font-size:inherit;}</style><p class="css-dv5tmu">September 24, 2020</p><div class="css-0"><a href="/tag/wix"><style data-emotion-css="b8nnxg">.css-b8nnxg{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:bold;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary,#007acc);margin-left:0;}</style><div class="css-b8nnxg">wix</div></a><a href="/tag/corvid"><style data-emotion-css="ugeaf6">.css-ugeaf6{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:bold;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary,#007acc);margin-left:4px;}</style><div class="css-ugeaf6">corvid</div></a><a href="/tag/javascript"><div class="css-ugeaf6">javascript</div></a><a href="/tag/serverless"><div class="css-ugeaf6">serverless</div></a></div></header><style data-emotion-css="164r41r">.css-164r41r{margin-top:8px;}</style><div class="css-164r41r"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:66.08695652173914%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAYZxdOUUI//EABoQAQADAAMAAAAAAAAAAAAAAAMBAhIEETP/2gAIAQEAAQUCIq7UjpW+dEm+Uk9y/r//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQMBAT8BVH//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAECETEhEv/aAAgBAQAGPwKMXeF9XR+XaMwoZ//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVGx/9oACAEBAAE/IdKylzAXAtu8RAvJY3FRInjZgYVr5P/aAAwDAQACAAMAAAAQTz//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/EFgiw//EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQIBAT8QXLh//8QAGhABAQEBAQEBAAAAAAAAAAAAAREhADFRYf/aAAgBAQABPxAFqSOxH6cdoQRQnc5sZOuXgTBPBt/eYtSFnuF5hUDwYeO//9k=" alt="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/8587ab67f6c6fd632c984f86fbe536ed/862d9/1Zfxe6RzmbGj6aiUq3V7SSA.jpg 345w,
/static/8587ab67f6c6fd632c984f86fbe536ed/32c8c/1Zfxe6RzmbGj6aiUq3V7SSA.jpg 690w,
/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg 1280w" sizes="(max-width: 1280px) 100vw, 1280px" /><img loading="lazy" sizes="(max-width: 1280px) 100vw, 1280px" srcset="/static/8587ab67f6c6fd632c984f86fbe536ed/862d9/1Zfxe6RzmbGj6aiUq3V7SSA.jpg 345w,
/static/8587ab67f6c6fd632c984f86fbe536ed/32c8c/1Zfxe6RzmbGj6aiUq3V7SSA.jpg 690w,
/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg 1280w" src="/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg" alt="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><style data-emotion-css="1iclvjn">.css-1iclvjn{text-align:center;display:block;font-size:0.9rem;padding-block:4px;}</style><em class="css-1iclvjn">Photo by Lukas from Pexels</em></div><section><style data-emotion-css="1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><p class="css-1ek8oqb">Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even used a non Wix account to build it and honestly, even if 1000 of you will build an app on Wix, I won‚Äôt profit from it directly in any way üòÄ</p><p class="css-1ek8oqb">So why I wrote this post? I really enjoyed building it. It‚Äôs simple (well, most of the parts), zero configuration, and of course, it‚Äôs free. Ah, and you don‚Äôt need to leave the browser ‚Äî 100% cloud.</p><p class="css-1ek8oqb">It all started when I published a package on npm and wanted to track the page views. Long time ago, I used ‚Äú<a href="https://hits.dwyl.com/dwyl/start-here" target="_blank" rel="noopener noreferrer">hits</a>‚Äù for the same purpose but now I thought that it can be interesting to build something like that by myself. Also, hits just gives the number of page views. I though it can be nicer to have more segmented data, by time, refers, geo location etc.</p><style data-emotion-css="h7w91b">.css-h7w91b{pointer-events:painted;}.css-h7w91b a{visibility:hidden;}.css-h7w91b:hover a{visibility:visible;}</style><h2 class="css-h7w91b"><style data-emotion-css="vvm4x1">.css-vvm4x1{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary,#007acc);}</style><a href="#undefined" aria-label="What‚Äôs needed for an Analytics app?" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What‚Äôs needed for an Analytics app?</h2><p class="css-1ek8oqb">Every analytics tool has at least the basic components:</p><ul class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Embedded resource in the host site ‚Äî script, image (pixel) etc. which send a request with relevant information about the user, the browser, ip, geo etc.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Server to handle the requests.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Database to store the records.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Client app to display the data usually in a graphic way ‚Äî tables, graphs, maps etc.</p></li></ul><p class="css-1ek8oqb">Another nice to have components:</p><ul class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Monitoring</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Environments ‚Äî staging / production for both the server and the database</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Authentication ‚Äî only allowed user can have access to the data</p></li></ul><p class="css-1ek8oqb">All those component is part of Corvid and Wix echo-system out of the box with zero configurations.</p><h2 class="css-h7w91b"><a href="#undefined" aria-label="Let‚Äôs Start" class="css-vvm4x1"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Let‚Äôs Start</h2><p class="css-1ek8oqb">I won‚Äôt explain how to create a website on Wix (I recommend to start with the ‚Äú<a href="https://editor.wix.com/html/editor/web/renderer/new?siteId=cbf36d3a-49d0-41c2-9482-1bb58d5fdda3&amp;metaSiteId=a573279f-ae6f-46d1-8556-7c93ae9b2c84" target="_blank" rel="noopener noreferrer">blank template</a>‚Äù), it‚Äôs straightforward, well documented and take few minutes. It takes another second to <a href="https://support.wix.com/en/article/getting-started-with-corvid-by-wix" target="_blank" rel="noopener noreferrer">enable Corvid</a> on the website.
Also, I won‚Äôt explain how to do things which already well documented. Instead, I added links so you can get all the information you need from them. (If I missed some, please let me know).</p><p class="css-1ek8oqb">Now let‚Äôs implement the components we talked about few lines ago.</p><p class="css-1ek8oqb"><strong class="css-0">Embedded Resource</strong></p><p class="css-1ek8oqb">There are several ways to do it. I choose to expose an endpoint which returns an SVG and just before that, add a record in the database. This way, I show a nice SVG badge in the package page and at the same time, it sends a request back to the server. I know I didn‚Äôt invent the wheel, ‚Äúhits‚Äù does exactly the same, but I‚Äôm just about to show you how much it‚Äôs easy in Corvid.</p><p class="css-1ek8oqb">Corvid hosts the code of both of the sides ‚Äî the client and the server, just like a nodejs based website which uses JavaScript both on the client and the server side.</p><p class="css-1ek8oqb">In order to expose an endpoint for external sources, we need to write a special server code (located under the ‚ÄúBackend‚Äù folder)? Why it‚Äôs special? Because usually the server code is accessible only internally to the website‚Äôs pages.
In order to create this special module, the file name should be called
‚Äú<a href="https://www.wix.com/corvid/reference/wix-http-functions" target="_blank" rel="noopener noreferrer">http-functions.js</a>‚Äù.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:472px">
      <a href="/static/d5438d40e185b8407edae96f5b217ee2/3c5de/1tmJ3tHQGLwXZ4oNHoqG2fg.png">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:102.66666666666666%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsSAAALEgHS3X78AAACV0lEQVQ4y5VUW2+iQBSev+6r793+BdN90sTdaNMa1i7Wtsa6LrEKqKAgIDPDIAJycw+ybdyu6eXky3BmMmfOd26g/UHSg2RZlmb7jwuq1WqVSuXrxQWsqqoWpxhjRVEopRvPc8JsvU01N9lGrx9G5+fnpVLpy9lZuVyWJKk4JYR0u91v9bo8nVnb/YLFop04QW58/ACKomgH2O38IIA1StI4SSCE/N5fSUHLd+lrQRYmmDprTAH2i0Ic08a6aR2wLrCychiWDVit7clURcJY/v0kLXRjOBJnqrZcmcpSl2Yq3AAGQCWK4mOE4U7VVg7bGBZGI1G+7Q3k+UIYiwPhqfdLGI4m/H1/qRsF81dJArbqcmUTStgGFUf/3dlD3SD0Ezi8B2U1bYpgTyj1/QDyBCSLTADh5FD3N2BhiihzZVlqNpvVarXX652kelLWxEHHHbb/jOTGfhDKsiwIwmAw0DTtI56zA3LjrR9AP4H9cDg0DONznuGTJEUKc5/QZO/y93ZZEGU2YYhtvMd+v16v3+TS/sFxjDlFFp7b858o4nQ/p4nGYgs7CC5B2EEYPlfyRMRwDoUsAEXEXuQGSe4ZBrh9129wnYf+4/fm5X2vf8Pf/ux0r1pcm78FvXP3AC3NPJ+4HnU9WPkpE02PUAeBn7GsDEaTNSbjiTRTVEVdqEttri5mykKUp2NRctzNNgg9PygwMbemG2LKYCRjiCqOY9/3QQFeMAoQB0zB+9mmbDOfz6+ur1utFvwMeJ7nOA5S12g0dF1/ydzpOh93GLgt9KJ4b3cLGP8B08mmvW5aSF4AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="http-functions.js to expose an endpoint for external calls" title="http-functions.js to expose an endpoint for external calls" src="/static/d5438d40e185b8407edae96f5b217ee2/3c5de/1tmJ3tHQGLwXZ4oNHoqG2fg.png" srcSet="/static/d5438d40e185b8407edae96f5b217ee2/5a46d/1tmJ3tHQGLwXZ4oNHoqG2fg.png 300w,/static/d5438d40e185b8407edae96f5b217ee2/3c5de/1tmJ3tHQGLwXZ4oNHoqG2fg.png 472w" sizes="(max-width: 472px) 100vw, 472px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span><em class="em-module--em--KE84c">http-functions.js to expose an endpoint for external calls</em></p><p class="css-1ek8oqb">Following the <a href="https://www.wix.com/corvid/reference/wix-http-functions/introduction" target="_blank" rel="noopener noreferrer">methods naming convention</a>, I created the ‚Äúview‚Äù endpoint which accepts <style data-emotion-css="1lcx0oi">.css-1lcx0oi{border-radius:0.3em;color:var(--theme-ui-colors-secondary,#1B1F23);background-color:var(--theme-ui-colors-highlight,#00ff00);padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-1lcx0oi">GET</code> requests and respond with SVG <!-- -->[1]<!-- -->.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">1</span><span class="token keyword module" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;wix-http-functions&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">2</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">3</span><span class="token plain"></span><span class="token keyword module" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">4</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> svg </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token template-string string" style="color:rgb(173, 219, 103)">&lt;svg&gt;....&lt;/svg&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">5</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> response </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">6</span><span class="token plain">    headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">7</span><span class="token plain">      </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;image/svg+xml&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">8</span><span class="token plain">      </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Content-Length&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> svg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">9</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">10</span><span class="token plain">    body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> svg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">11</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">12</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">13</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre></div><p class="css-1ek8oqb"><a href="http://moshfeudev.wixsite.com/shield/_functions/view_demo" target="_blank" rel="noopener noreferrer">Demo</a></p><p class="css-1ek8oqb"><strong class="css-0">Saving the Data</strong></p><p class="css-1ek8oqb">Corvid offers a <a href="https://support.wix.com/en/article/corvid-working-with-wix-data" target="_blank" rel="noopener noreferrer">built-in database</a> (‚ÄúContent Manager‚Äù) with a strong yet easy API, called <code class="css-1lcx0oi">wixData</code>.</p><p class="css-1ek8oqb">First thing is creating a table (‚Äúcollection‚Äù) ‚Äî <code class="css-1lcx0oi">views</code> and add the following columns: <code class="css-1lcx0oi">headers</code> (as Text), <code class="css-1lcx0oi">refrer</code> (as Text). This will be enough for the basic app, you can add more of course (I added <code class="css-1lcx0oi">project</code> so I could embed as many resources as I want).</p><p class="css-1ek8oqb">It‚Äôs a good time to mention that, when you create a collection, pay attention to the permission section (‚ÄúWhat‚Äôs the collection for?‚Äù). Start with set ‚Äúanyone‚Äù to all the methods and customize it as you go.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:300px">
      <a href="/static/b7fb8b5be252165b0a647146fd901eb5/5a46d/1SOm7yvZtUtNJmXH5VkeEHA.png">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:125%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAAC0UlEQVQ4y41UTW/TQBD1j6rKDUSRqkJb/gAHxIUzf4NLQYAEqIKSVNxAIASH3iraUoGoaOAALaR2bG/sOOTDXu/6cx3erts0bVLR0fNovN7nnZk3trbw6PtspTtfac298BYr3rUjLFSln3k2hmVn5ql1edmdf1jTLt77cWWlM1/1Zp5711fbVyve7Io3V/EWqzK48NidHsWT1vQDY2ppb+p+/dLSrvb+q7Flpet19lHn6wd8oxFvKmwY0m+byTg+mfEXp/iwY2hOkwxEmjAqEp7FbFAUg/9ZofYQQjTDtHsB02232e7arU7AIjwQxZkAMc5EVAxM09YapoXdaZblucAFD4iiENJJK4NyvQQ2gyLJP/frlMddn/aCsBuE8B2fGsQ1Ha/RbAGW0zZIq9OXG0pgMyi/9uva77qeZHnIIxbFPE5K+CELQuZTpgIOQrkhVKAsSjLxRzc0m5AkzTiece7TUHHCkEUh5yHjfQpWPLFhIEoy3u22O/2AolhZlVCmypOdEOIUOcNDkG2imZaFtMEcP+Esy0sykWS7zARWdhv+CCKTKuSy+SPIVS5l2s2Qxz0/8IOw71PUjCwCFE8ZPIphPDp1MrQ7JFs2hiS0Xa/bD86ZdpSKbjywbNUwNSR5+b5yOgs1ScXwVs7ccdrYOzyZgJekKUAhF5SUskUIICwCLELLyVI1LClV62+36wcgRHJI4jiBpfCIsYienep2UZINi+AEr4PC2TlrlioMyUOp1HCUXpyMi1ETQ6mQdpSkch4ZR+YYR2jmh1IqLPZ8iluIPblmNExK5XgdJVUxycbTTg8nzCbICh1Gt8/+dQzEkWbHDZOzrX4GqpQTX/woYPKzjXOmQCOpnGXZmuM4ONGkBc0mnal8LAZ31ujNN/6tt/7td/6NV72726nrOtrOt13iensG0W2n2ZwMmzivPxvVTX11U3+5pVc3DtZqzd1a7R/Z0m4vx15h2wAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="Permissions settings" title="Permissions settings" src="/static/b7fb8b5be252165b0a647146fd901eb5/5a46d/1SOm7yvZtUtNJmXH5VkeEHA.png" srcSet="/static/b7fb8b5be252165b0a647146fd901eb5/5a46d/1SOm7yvZtUtNJmXH5VkeEHA.png 300w" sizes="(max-width: 300px) 100vw, 300px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span><em class="em-module--em--KE84c">Permissions settings</em></p><p class="css-1ek8oqb">Now we can modify the endpoint code to extract the relevant information from the request and save it in <code class="css-1lcx0oi">views</code>.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">2</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">await</span><span class="token plain"> wixData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;views&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">3</span><span class="token plain">    referer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">4</span><span class="token plain">    headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">5</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">6</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">7</span><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre></div><p class="css-1ek8oqb">(You can see the logs in the ‚Äú<a href="https://support.wix.com/en/article/corvid-about-site-monitoring" target="_blank" rel="noopener noreferrer">Site Monitoring</a>‚Äù)</p><p class="css-1ek8oqb">The nice thing about the <code class="css-1lcx0oi">headers</code> is that they contain geo location information out of the box, so later, we can show a geo location visualization.</p><p class="css-1ek8oqb">Now, when we have all the data, we want to show it visually.</p><p class="css-1ek8oqb"><strong class="css-0">Client App</strong></p><p class="css-1ek8oqb">This step should be straightforward, right? After all, Wix is a UI builder before anything. The good news is that for some components, it‚Äôs true. For example, it‚Äôs very easy to create a table and connect it to the database. It can be done even without coding. But when it comes to more sophisticated visualization elements such as graphs, charts, maps etc. there are no built-in options nor external apps to connect the data to the elements.
So there is no easy way (As fat as I know) but there is a way shown in this <a href="https://www.wix.com/corvid/example/create-a-custom-chart" target="_blank" rel="noopener noreferrer">tutorial</a> and that‚Äôs how I did it, but I have to admit that it‚Äôs not that convenient. I hope it will be changed in the future.</p><p class="css-1ek8oqb">In a nutshell, the challenge is that even though we can ‚Äúinteract‚Äù with components through Corvid code, we are not interacting with the DOM itself but with a special isolated DOM <strong class="css-0">like</strong>. As a result, we can‚Äôt use JavaScript libraries which depends on interacting with the actual DOM.
The only (free) way to have access to a DOM is by adding an ‚ÄúHTML iframe‚Äù component. But here is the catch, we can‚Äôt inject data into the iframe directly because the communication between the page and the iframe has to be through post messages.</p><p class="css-1ek8oqb">So here is the flow starts on page ready.</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Get the data from the <code class="css-1lcx0oi">views</code> table.
1.1 In parallel, render the iframe (handle by Wix).
1.2. Establish an event listener to get messages from the iframe.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">The iframe initiating a chart library, establish an event listener to get messages from the page, and posts a message to the parent saying ‚ÄúI‚Äôm ready‚Äù.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">The page (waits for the data if needed and) posts a message back with the data.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">The iframe gets the data and draw the chart accordingly.</p></li></ol><p class="css-1ek8oqb">If I missed you, maybe a diagram will help:</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:461px">
      <a href="/static/7a7eee88a236a80b72f3e86586fb2d8a/9f170/11lH2lnOpgoGDTzvNgCtSEQ.jpg">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:97.66666666666669%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuaxoqiUShf//EABYQAAMAAAAAAAAAAAAAAAAAABAgQf/aAAgBAQABBQI1f//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABsQAQACAwEBAAAAAAAAAAAAAAEAERBBUSEx/9oACAEBAAE/Id1uCdJRyLp9gHPcVZArH//aAAwDAQACAAMAAAAQo8jA/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBABAQACAgMAAAAAAAAAAAAAAREAQSExEFFh/9oACAEBAAE/EBFhIPWIZR+ZbTAqeHfFzvEbXWBDJg8jrAEPH//Z&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="The diagram shows the flow and the communication between the page and the iframe" title="The diagram shows the flow and the communication between the page and the iframe" src="/static/7a7eee88a236a80b72f3e86586fb2d8a/9f170/11lH2lnOpgoGDTzvNgCtSEQ.jpg" srcSet="/static/7a7eee88a236a80b72f3e86586fb2d8a/f93b5/11lH2lnOpgoGDTzvNgCtSEQ.jpg 300w,/static/7a7eee88a236a80b72f3e86586fb2d8a/9f170/11lH2lnOpgoGDTzvNgCtSEQ.jpg 461w" sizes="(max-width: 461px) 100vw, 461px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span><em class="em-module--em--KE84c">The diagram shows the flow and the communication between the page and the iframe</em></p><p class="css-1ek8oqb">In this project, I‚Äôm using Google‚Äôs ‚Äú<a href="https://developers.google.com/chart/interactive/docs/gallery/linechart" target="_blank" rel="noopener noreferrer">Line Chart</a>‚Äù so we need to fit the data to the <code class="css-1lcx0oi">[DataTable</code>](<a href="https://developers.google.com/chart/interactive/docs/datatables_dataviews#emptytable" target="_blank" rel="noopener noreferrer">https://developers.google.com/chart/interactive/docs/datatables_dataviews#emptytable</a>) format.</p><p class="css-1ek8oqb"><strong class="css-0">The iframe‚Äôs code</strong></p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:300px">
      <a href="/static/69c369ba366927507677543742922102/5a46d/1Vr05wRrYTy64LyAdl1x-sg.png">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:127.33333333333331%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsSAAALEgHS3X78AAACr0lEQVQ4y41Uy2oUQRSdf3HlIn6DCwmYhZqV8Sf8AFEkSEDETcClEk0UkpUEdRNJFuLShahomJjJTKbf1e+uV1fXw9vdCZlxOtHiUNyuqnMfpy+3F+PqyC+OvMT2oxRzUkoq1BTKGZxe9bhQtuMMBof7/X4YxcYYabQy5n/Q45WuNFAMbJXSUpuLIZSpTu2aLJSuGvyTKZswapp8YSipWlRSlZUaJhURYFQQrCaXTSadAL8oSkfH9shyXNc9sKMnn5LP++7b7Q9xVoBgWkIetUwNjDyzG1CcJRFKwiCNA4xx382jnHgo5EL2lNJfLfxgB93fQe3eGg8/nmB5N1rejR/tRfd2ove/clBWtZWD2vDx+kt8edVd2EDX1tD8S3T9Fbr6IrjyzGvgz61ac49/zD09uLTy8+67QCt5pjY42v6eLKwHS1vh7c1waTO8s1Xj1hu02ODmhn9jbby47sw/t1b2QuCekVkpg5T6hXQy4WRVAzCEmwsPUFQBUQHVzW78jDFQ3JySCZcFYVLKOE4IIYwxSmlrpFkGtplYjHM6SU6pTAsKB0KaKE5cH4Vx4qPI8QLGeN2tqu4KAMhE2DS5jcyEDrEsigLaGxNSEJLlRSmEmV50lkwZQ1h+cwXOMxRGWmtzzuogZ5jOvpv0ALaE7GfJoF6BqVQqxxTuGC8JZQ04JgwTiqH0suyOPLYsP0AKyAWUSkGSrMDgDlOGGy9gg9du8mA0djwfLmzXHQxHlu30f8OZNRge244HTi+qOcUsybFScjS2gQUig2BCVBxyLUvofN3MiW4yzKSc1FmFcQzRPB+Z89cs+URtKGw4GvcPB9BYjcL6v8htZCgPOmRsu+0Y7Cb/1Z7QWwUr4RR05qIqodpS1BFmwTmGvyaVnJxh4Av+NgFw0QLcdwJeTo63P0dNhbG7fBcZAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="Luckily, we don‚Äôt need to host the iframe‚Äôs code anywhere, we can set its code directly in the Editor [2]." title="Luckily, we don‚Äôt need to host the iframe‚Äôs code anywhere, we can set its code directly in the Editor [2]." src="/static/69c369ba366927507677543742922102/5a46d/1Vr05wRrYTy64LyAdl1x-sg.png" srcSet="/static/69c369ba366927507677543742922102/5a46d/1Vr05wRrYTy64LyAdl1x-sg.png 300w" sizes="(max-width: 300px) 100vw, 300px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span><em class="em-module--em--KE84c">Luckily, we don‚Äôt need to host the iframe‚Äôs code anywhere, we can set its code directly in the Editor <!-- -->[2]<!-- -->.</em></p><p class="css-1ek8oqb">Here is the code (notice the ‚Äúloader‚Äù üòâ)</p><div class="gatsby-highlight" data-language="html"><pre class="prism-code language-html" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">1</span><span class="token doctype" style="color:rgb(199, 146, 234);font-style:italic">&lt;!DOCTYPE html&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">2</span><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">3</span><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag" style="color:rgb(127, 219, 202)"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">5</span><span class="token tag" style="color:rgb(127, 219, 202)">      </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">type</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">text/javascript</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">6</span><span class="token tag" style="color:rgb(127, 219, 202)">      </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">https://www.gstatic.com/charts/loader.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">7</span><span class="token tag" style="color:rgb(127, 219, 202)">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">8</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">chart_div</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">9</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">siv</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">loading</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Loading...</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">siv</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">10</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">11</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">12</span><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// Initiate google charts</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">13</span><span class="token script language-javascript">      google</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">charts</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">load</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;current&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"> packages</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;corechart&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;line&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">14</span><span class="token script language-javascript">      google</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">charts</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">setOnLoadCallback</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">init</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">15</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">16</span><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">onEvent</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript parameter">details</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">17</span><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> data </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">google</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">visualization</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">DataTable</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">18</span><span class="token script language-javascript">        data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addColumn</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;date&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;day&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">19</span><span class="token script language-javascript">        data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addColumn</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;number&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;Page Views&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">20</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">21</span><span class="token script language-javascript">        data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addRows</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token script language-javascript spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token script language-javascript">details</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">22</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">23</span><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> options </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">24</span><span class="token script language-javascript">          pointSize</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">5</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">25</span><span class="token script language-javascript">          hAxis</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">26</span><span class="token script language-javascript">            title</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;Time&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">27</span><span class="token script language-javascript">            format</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;dd/MM/yy&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">28</span><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">29</span><span class="token script language-javascript">          vAxis</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">30</span><span class="token script language-javascript">            title</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;Popularity&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">31</span><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">32</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">33</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">34</span><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> chart </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">google</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">visualization</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">LineChart</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">35</span><span class="token script language-javascript">          </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;chart_div&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">36</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">37</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">38</span><span class="token script language-javascript">        chart</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">draw</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> options</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">39</span><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">40</span><span class="token script language-javascript" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">41</span><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">init</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">42</span><span class="token script language-javascript">        </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// Listen to messages from the page</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">43</span><span class="token script language-javascript">        </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;message&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript parameter"> data</span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript parameter"> </span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript parameter"> type</span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript parameter"> data </span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript parameter"> </span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">44</span><span class="token script language-javascript">          </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">if</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">type </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">===</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;graph&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">45</span><span class="token script language-javascript">            </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">onEvent</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">46</span><span class="token script language-javascript">            </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;#loading&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">style</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">display</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;none&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">47</span><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">48</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">49</span><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">50</span><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// Tell the page the iframe&#x27;s ready</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">51</span><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">parent</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">postMessage</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"> type</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;ready&#x27;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;*&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">52</span><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">53</span><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">54</span><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre></div><p class="css-1ek8oqb"><strong class="css-0">The page code</strong></p><div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">1</span><span class="token keyword module" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> wixData </span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;wix-data&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">2</span><span class="token plain"></span><span class="token keyword module" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> _ </span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;lodash&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">3</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">4</span><span class="token plain">$w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">onReady</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">5</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> getDataPromise </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> wixData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;views&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">6</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">7</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// The iframe is ready</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">8</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">$w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;#html1&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">onMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> data </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">9</span><span class="token plain">    </span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;ready&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">10</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> results </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">await</span><span class="token plain"> getDataPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">11</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">12</span><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Group the rows by date and map it to DataTable format</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">13</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> chartData </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">entries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">14</span><span class="token plain">        _</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">groupBy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_createdDate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toDateString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">15</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token parameter">date</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> entities</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> entities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">16</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">17</span><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Post back to the page with the data</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">18</span><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">$w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;#html1&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">postMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">19</span><span class="token plain">        type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;graph&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">20</span><span class="token plain">        data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> chartData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">21</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">22</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">23</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">24</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">And the result</p><p class="css-1ek8oqb"><img src="/46e3d09505a0bc6b3284e57599d5d2b5/1GjLlNxfqhTIzS615wK-w1A.gif" alt="How it looks on Chrome" class="css-0"/><em class="em-module--em--KE84c">How it looks on Chrome</em></p><p class="css-1ek8oqb">If you don‚Äôt want this page to be visible to everyone, <a href="https://support.wix.com/en/article/limiting-pages-on-your-site-to-specific-members-member-roles" target="_blank" rel="noopener noreferrer">you can limit it</a>.</p><p class="css-1ek8oqb">This is it basically. From this point you can take it to wherever your imagination can take you ‚Äî hit maps, different categorization, comparing timestamp etc. If you need my help with that, leave a comment or reach out.</p><p class="css-1ek8oqb">If you want to get a copy of this website, let me know and I‚Äôll send a copy to your Wix account.</p><p class="css-1ek8oqb">And usually, if you have questions or ideas about how to improve this post (or my other posts), leave a comment or say hi üëã
<a href="https://www.linkedin.com/in/moshfeu/" target="_blank" rel="noopener noreferrer"><strong class="css-0">Moshe Feuchtwanger - Frontend Developer - Wix.com | LinkedIn</strong><em class="em-module--em--KE84c">View Moshe Feuchtwanger&#x27;s profile on LinkedIn, the world&#x27;s largest professional community. Moshe has 7 jobs listed on‚Ä¶</em>www.linkedin.com</a></p><p class="css-1ek8oqb">[1]<!-- --> The endpoint can also respond with another image types such as png, jpg etc. encoded by base64</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> img </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2PgjOr/DwADVAHy2H3MYgAAAABJRU5ErkJggg==&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;base64&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">2</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> response </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">3</span><span class="token plain">  headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">4</span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Content-Type&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;image/png&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">5</span><span class="token plain">    </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;Content-Length&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">6</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">7</span><span class="token plain">  body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> img</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">9</span><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--2tWK5">10</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">[2]<!-- --> Yah, it‚Äôs a bit annoying to edit the code in the Editor, copy / paste it in your favorite code editor and then copy / paste it back.</p></section></article></main></div></div><footer class="footer-module--footer--R2bpz"><style data-emotion-css="1jso6df">.css-1jso6df{-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:8px;}</style><style data-emotion-css="5l21x5">.css-5l21x5{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;list-style:none;padding:8px;}</style><ul class="css-5l21x5"><li><a rel="prev" href="/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2/">‚Üê <!-- -->How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 2</a></li><li></li></ul>¬© <!-- -->2021<!-- --> - Moshe Feuchtwander</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118358576-1"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-118358576-1', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/build-your-own-analytics-tool-on-corvid-by-wix/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-0d7e88a7db3bbb3eb0cb.js"],"app":["/app-0d2844e3355ab5c2b7dc.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-2354108c7c1e6ea82115.js"],"component---src-components-post-js":["/component---src-components-post-js-a55c0f18d4992a8c162c.js"],"component---src-pages-404-js":["/component---src-pages-404-js-374e405cea89028be59d.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-0d85a378afe990b7f8c3.js"]};/*]]>*/</script><script src="/polyfill-0d7e88a7db3bbb3eb0cb.js" nomodule=""></script><script src="/component---src-components-post-js-a55c0f18d4992a8c162c.js" async=""></script><script src="/commons-00f4cc93568a24184b28.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-0d2844e3355ab5c2b7dc.js" async=""></script><script src="/framework-a445a942d18bd3dc90d1.js" async=""></script><script src="/webpack-runtime-0278ecef0f8e178384ff.js" async=""></script></body></html>