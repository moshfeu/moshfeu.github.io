<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.9"/><meta data-react-helmet="true" name="google-site-verification" content="hpJ5hHMHz7pz5hEBUsKSCUaVIZg8rMKiQ86uyqVuFw4"/><meta data-react-helmet="true" name="description" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" property="og:title" content="Build Your Own Analytics Tool on Corvid by Wix"/><meta data-react-helmet="true" property="og:description" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="Moshe Feuchtwanger"/><meta data-react-helmet="true" name="twitter:title" content="Build Your Own Analytics Tool on Corvid by Wix"/><meta data-react-helmet="true" name="twitter:description" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" name="keywords" content="wix,corvid,javascript,serverless"/><meta data-react-helmet="true" name="og:image" content="https://moshfeu.github.io/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg"/><meta data-react-helmet="true" name="og:image:alt" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" name="twitter:image" content="https://moshfeu.github.io/static/8587ab67f6c6fd632c984f86fbe536ed/ec6c5/1Zfxe6RzmbGj6aiUq3V7SSA.jpg"/><meta data-react-helmet="true" name="twitter:image:alt" content="Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even‚Ä¶"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><style data-href="/styles.9c423fcc01d89e273043.css" data-identity="gatsby-global-css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}[data-reach-skip-nav-link]:focus{clip:auto;background:#fff;height:auto;left:10px;padding:1rem;position:fixed;top:10px;width:auto;z-index:1}.link-module--link--bd3ac{color:var(--link-color);word-break:break-word}body{font-size:18px;line-height:1.5}body:not(.dark-mode){--dark-sky:#53bde6;--light-sky:#cdfdff;--planet-color:#ffe130;--link-color:#007acc;--text-color:inherit;--planet-emoji:"üï∂Ô∏è"}body.dark-mode{--dark-sky:#000;--light-sky:#122627;--planet-color:#fff;--link-color:#ffeb00;--text-color:#fffee9;--planet-emoji:"üëÄ"}video{width:100%}.header-module--header--1a727{--radius:60px;--dim:calc(var(--radius)*2);--position:-10px;background:linear-gradient(var(--dark-sky),var(--light-sky));color:var(--text-color);overflow:hidden;position:relative;transition:background .2s ease}.header-module--header--1a727 .header-module--toggle-dark--3b11c{background:radial-gradient(var(--radius) circle at var(--radius) var(--radius),var(--planet-color) 50%,transparent 100%);border:0;color:transparent;cursor:pointer;font-size:40px;height:var(--dim);outline:0;padding:0;position:absolute;right:0;top:0;transform:rotate(30deg) translate(10px,-50px);transition:background,color .2s ease;width:var(--dim)}.header-module--header--1a727 .header-module--toggle-dark--3b11c:focus,.header-module--header--1a727 .header-module--toggle-dark--3b11c:hover{color:#000}.header-module--header--1a727 .header-module--toggle-dark--3b11c span:before{content:var(--planet-emoji)}.header-module--header--1a727 a{align-items:center;box-shadow:none;color:inherit;display:inline-flex;text-decoration:none}.social-nav-module--link--a1fb1{margin:0 5px}.social-nav-module--link--a1fb1 svg{width:20px}body.dark-mode .social-nav-module--link--a1fb1 svg path{fill:#fff}.footer-module--footer--675c6{background:#000;box-shadow:0 0 10px #000;color:#b5e853;font-family:monospace;padding-block:15px;text-align:center}.footer-module--footer--675c6:before{background:radial-gradient(5px circle at 10px 10px,#fe6158 100%,transparent),radial-gradient(5px circle at 27px 10px,#febe2f 100%,transparent),radial-gradient(5px circle at 44px 10px,#28c940 100%,transparent);content:"";display:block;height:25px}.footer-module--footer--675c6 a,.footer-module--footer--675c6 a:link,.footer-module--footer--675c6 a:visited{color:#63c0f5}.footer-module--footer--675c6 .footer-module--no-copyright--7d572{vertical-align:middle}.layout-module--root--65bca{color:var(--text-color);display:flex;flex-direction:column;min-height:100vh}.layout-module--content--e6f14{background:linear-gradient(var(--light-sky) calc(100% - 60px),#8ab807 calc(100% - 40px),#563a2c calc(100% - 10px),#563a2c 100%);flex:1 1;padding-bottom:30px}.layout-module--content--e6f14 img{max-width:100%}.code-module--line-number-style--5b2b0{display:inline-block;opacity:.3;padding-left:1em;padding-right:1em;position:relative;text-align:center;-webkit-user-select:none;user-select:none}img+.em-module--em--86c77,span+.em-module--em--86c77{display:block;font-size:.9rem;padding-block:4px;text-align:center}</style><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Build Your Own Analytics Tool on Corvid by Wix | Moshe Feuchtwanger</title><link data-react-helmet="true" rel="icon" type="image/png" href="/static/avatar-ff57f6a40c8eadde26a1de94865ca765.png"/><link data-react-helmet="true" rel="canonical" href="https://medium.com/swlh/build-your-own-analytics-tool-on-corvid-by-wix-cd12ae76d291"/><link href="https://fonts.googleapis.com/css?family=Roboto:wght@300|Open+Sans&amp;display=swap" rel="stylesheet"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 1sbp79x">body{--theme-ui-colors-text:#282c35;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#007acc;--theme-ui-colors-secondary:#1B1F23;--theme-ui-colors-muted:hsla(0, 0%, 0%, 0.2);--theme-ui-colors-highlight:#00ff00;--theme-ui-colors-heading:#282c35;--theme-ui-colors-prism-background:#011627;--theme-ui-colors-prism-comment:#809393;--theme-ui-colors-prism-string:#addb67;--theme-ui-colors-prism-var:#d6deeb;--theme-ui-colors-prism-number:#f78c6c;--theme-ui-colors-prism-constant:#82aaff;--theme-ui-colors-prism-punctuation:#c792ea;--theme-ui-colors-prism-className:#ffc98b;--theme-ui-colors-prism-tag:#ffa7c4;--theme-ui-colors-prism-boolean:#ff5874;--theme-ui-colors-prism-property:#80cbc4;--theme-ui-colors-prism-namespace:#b2ccd6;--theme-ui-colors-prism-highlight:hsla(207, 95%, 15%, 1);color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}body.theme-ui-dark{--theme-ui-colors-text:rgba(255, 255, 255, 0.86);--theme-ui-colors-background:#232129;--theme-ui-colors-primary:#D9BAE8;--theme-ui-colors-secondary:rgba(255, 255, 255, 0.86);--theme-ui-colors-muted:hsla(0, 0%, 100%, 0.2);--theme-ui-colors-highlight:#663399;--theme-ui-colors-heading:#fff;}</style><style data-emotion="css-global 1rckfa9">*{box-sizing:border-box;}body{margin:0;font-family:Open Sans,Roboto,system-ui,sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--root--65bca"><header class="header-module--header--1a727"><style data-emotion="css 13xn1c7">.css-13xn1c7{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width: 40em){.css-13xn1c7{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><div class="css-13xn1c7"><style data-emotion="css 1y5dmvz">.css-1y5dmvz{margin-top:0;margin-bottom:0;font-size:24px;}</style><style data-emotion="css 1qasgcb">.css-1qasgcb{box-sizing:border-box;margin:0;min-width:0;margin-top:0;margin-bottom:0;font-size:24px;}</style><div class="css-1qasgcb"><a href="/"><style data-emotion="css 19ns1mg">.css-19ns1mg{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><img src="/static/e981c1fbc840d15a0caabe830fa5674f/aff39/avatar.png" srcSet="/static/e981c1fbc840d15a0caabe830fa5674f/aff39/avatar.png 1x,
/static/e981c1fbc840d15a0caabe830fa5674f/e5b88/avatar.png 1.5x,
/static/e981c1fbc840d15a0caabe830fa5674f/88b72/avatar.png 2x" alt="Moshe Feuchtwanger" class="css-19ns1mg"/>Moshe Feuchtwanger</a></div></div><button aria-label="Toggle Dark Mode" class="header-module--toggle-dark--3b11c"><span></span></button></header><div class="layout-module--content--e6f14"><style data-emotion="css 1in33uw">.css-1in33uw{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1in33uw"><main><article><header><h1 class="css-0">Build Your Own Analytics Tool on Corvid by Wix</h1><style data-emotion="css rsra4b">.css-rsra4b{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion="css 1jnjfic">.css-1jnjfic{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-1jnjfic code{font-size:inherit;}</style><p class="css-1jnjfic">September 24, 2020</p><style data-emotion="css lgbo0i">.css-lgbo0i{box-sizing:border-box;margin:0;min-width:0;}</style><div class="css-lgbo0i"><a href="/tag/wix"><style data-emotion="css 21clv8">.css-21clv8{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:bold;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary);margin-left:0;}</style><div class="css-21clv8">wix</div></a><a href="/tag/corvid"><style data-emotion="css 8rl423">.css-8rl423{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:bold;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary);margin-left:4px;}</style><div class="css-8rl423">corvid</div></a><a href="/tag/javascript"><div class="css-8rl423">javascript</div></a><a href="/tag/serverless"><div class="css-8rl423">serverless</div></a></div></header><style data-emotion="css 164r41r">.css-164r41r{margin-top:8px;}</style><div class="css-164r41r"><style data-emotion="css 1iclvjn">.css-1iclvjn{text-align:center;display:block;font-size:0.9rem;padding-block:4px;}</style><em class="css-1iclvjn">Photo by Lukas from Pexels</em></div><section><style data-emotion="css 1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><p class="css-1ek8oqb">Disclaimer: I‚Äôm a Frontend developer at Wix, that‚Äôs right. But this post written as a result of my experience as a ‚Äúregular‚Äù user. I even used a non Wix account to build it and honestly, even if 1000 of you will build an app on Wix, I won‚Äôt profit from it directly in any way üòÄ</p><p class="css-1ek8oqb">So why I wrote this post? I really enjoyed building it. It‚Äôs simple (well, most of the parts), zero configuration, and of course, it‚Äôs free. Ah, and you don‚Äôt need to leave the browser ‚Äî 100% cloud.</p><p class="css-1ek8oqb">It all started when I published a package on npm and wanted to track the page views. Long time ago, I used ‚Äú<a class="link-module--link--bd3ac" href="https://hits.dwyl.com/dwyl/start-here" target="_blank" rel="noopener noreferrer">hits</a>‚Äù for the same purpose but now I thought that it can be interesting to build something like that by myself. Also, hits just gives the number of page views. I though it can be nicer to have more segmented data, by time, refers, geo location etc.</p><style data-emotion="css 17gfwuz">.css-17gfwuz{pointer-events:painted;}.css-17gfwuz a{visibility:hidden;}.css-17gfwuz:hover a{visibility:visible;}</style><h2 class="css-17gfwuz"><style data-emotion="css yixlj4">.css-yixlj4{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary);}</style><a href="#undefined" aria-label="What‚Äôs needed for an Analytics app?" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What‚Äôs needed for an Analytics app?</h2><p class="css-1ek8oqb">Every analytics tool has at least the basic components:</p><ul class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Embedded resource in the host site ‚Äî script, image (pixel) etc. which send a request with relevant information about the user, the browser, ip, geo etc.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Server to handle the requests.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Database to store the records.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Client app to display the data usually in a graphic way ‚Äî tables, graphs, maps etc.</p></li></ul><p class="css-1ek8oqb">Another nice to have components:</p><ul class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Monitoring</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Environments ‚Äî staging / production for both the server and the database</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Authentication ‚Äî only allowed user can have access to the data</p></li></ul><p class="css-1ek8oqb">All those component is part of Corvid and Wix echo-system out of the box with zero configurations.</p><h2 class="css-17gfwuz"><a href="#undefined" aria-label="Let‚Äôs Start" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Let‚Äôs Start</h2><p class="css-1ek8oqb">I won‚Äôt explain how to create a website on Wix (I recommend to start with the ‚Äú<a class="link-module--link--bd3ac" href="https://editor.wix.com/html/editor/web/renderer/new?siteId=cbf36d3a-49d0-41c2-9482-1bb58d5fdda3&amp;metaSiteId=a573279f-ae6f-46d1-8556-7c93ae9b2c84" target="_blank" rel="noopener noreferrer">blank template</a>‚Äù), it‚Äôs straightforward, well documented and take few minutes. It takes another second to <a class="link-module--link--bd3ac" href="https://support.wix.com/en/article/getting-started-with-corvid-by-wix" target="_blank" rel="noopener noreferrer">enable Corvid</a> on the website.
Also, I won‚Äôt explain how to do things which already well documented. Instead, I added links so you can get all the information you need from them. (If I missed some, please let me know).</p><p class="css-1ek8oqb">Now let‚Äôs implement the components we talked about few lines ago.</p><p class="css-1ek8oqb"><strong class="css-0">Embedded Resource</strong></p><p class="css-1ek8oqb">There are several ways to do it. I choose to expose an endpoint which returns an SVG and just before that, add a record in the database. This way, I show a nice SVG badge in the package page and at the same time, it sends a request back to the server. I know I didn‚Äôt invent the wheel, ‚Äúhits‚Äù does exactly the same, but I‚Äôm just about to show you how much it‚Äôs easy in Corvid.</p><p class="css-1ek8oqb">Corvid hosts the code of both of the sides ‚Äî the client and the server, just like a nodejs based website which uses JavaScript both on the client and the server side.</p><p class="css-1ek8oqb">In order to expose an endpoint for external sources, we need to write a special server code (located under the ‚ÄúBackend‚Äù folder)? Why it‚Äôs special? Because usually the server code is accessible only internally to the website‚Äôs pages.
In order to create this special module, the file name should be called
‚Äú<a class="link-module--link--bd3ac" href="https://www.wix.com/corvid/reference/wix-http-functions" target="_blank" rel="noopener noreferrer">http-functions.js</a>‚Äù.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:472px">
      <a class="link-module--link--bd3ac" href="/static/d5438d40e185b8407edae96f5b217ee2/3c5de/1tmJ3tHQGLwXZ4oNHoqG2fg.png">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:102.66666666666666%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAACXklEQVQ4y5VTXU/bMBTNL+cXjEf+AEJIe6NC5aHqujVdhli30tBBlzYlTdKENJ/OhxM3vnamNICgGwyOjizL8tH1PedaqLbgnANAxTnjvHozhG63e3h4eHx8fHR0NBqNmlOMsaqqQRAghGLC3QxWMYQ52xW3Wq29vb2Dg4MP+/uSJDWnRVHIsnx2dnYlyz7mqxjUgK6zWvz0YQIAlDVoXhQbQkoKFGo0vWzBKsYqzji7B2zJGBPWfuiHyA8jNwib9X7jh5bjWo5rrz177VnbteGd6zteoC5NYa7p4+vfxsq+mS2UxdK0naVpq5qhr2wKUFL6Ny1n7YeRF8bC0rSG41/KQptr+mQ6u5zcXCvqxehqrukvmey4nuP6cYqFl5Kpw3tob4eN6UGUCMBYkiQIIQpQELJ1ggPUl/gLaGYhRIngh2jtOL1er91uDwaDxue3IIpT4dmEvQe1OMW5bdvj8ViW5fl8zt8wnvxRnOEcY2wYxnQ6NQzjfZWrqmrybB5PCCnL8nVZXvKsrFCcCiGKNU07OTmRJEkUxX6/b5pmVVXsids7YisGA4EbpgLnvCAkw3lJaTPVjO3eBsYpQENgEGEa5VBX5lU1URYfTzvjyXXrtP3t4rsonQ+k827vy2fxa7PXDBNleRCnQZLFafZTTy7NNEJJ3bO99n9c3QQRul3qt0t9Zd+Zlr2ybd1cabqhzFU/QrjYZDnJcpIXxAhyC5G68qYs+fa75Rg3aVNKCSGbzeb/bvtR7HleXxS73U+z2Ww4HIqiKElSp9NRFOXRuX/n/OwnANxP74PVr1f+A2Pdpv+m+QXYAAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="http-functions.js to expose an endpoint for external calls" title="http-functions.js to expose an endpoint for external calls" src="/static/d5438d40e185b8407edae96f5b217ee2/3c5de/1tmJ3tHQGLwXZ4oNHoqG2fg.png" srcSet="/static/d5438d40e185b8407edae96f5b217ee2/5a46d/1tmJ3tHQGLwXZ4oNHoqG2fg.png 300w,/static/d5438d40e185b8407edae96f5b217ee2/3c5de/1tmJ3tHQGLwXZ4oNHoqG2fg.png 472w" sizes="(max-width: 472px) 100vw, 472px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span><em class="em-module--em--86c77">http-functions.js to expose an endpoint for external calls</em></p><p class="css-1ek8oqb">Following the <a class="link-module--link--bd3ac" href="https://www.wix.com/corvid/reference/wix-http-functions/introduction" target="_blank" rel="noopener noreferrer">methods naming convention</a>, I created the ‚Äúview‚Äù endpoint which accepts <style data-emotion="css 118aluo">.css-118aluo{border-radius:0.3em;color:var(--theme-ui-colors-secondary);background-color:var(--theme-ui-colors-highlight);padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-118aluo">GET</code> requests and respond with SVG <!-- -->[1]<!-- -->.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword module" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports">ok</span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;wix-http-functions&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain"></span><span class="token keyword module" style="color:rgb(127, 219, 202)">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> svg </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token template-string string" style="color:rgb(173, 219, 103)">&lt;svg&gt;....&lt;/svg&gt;</span><span class="token template-string template-punctuation string" style="color:rgb(173, 219, 103)">`</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> response </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">headers</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain">      </span><span class="token string-property property" style="color:rgb(128, 203, 196)">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;image/svg+xml&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain">      </span><span class="token string-property property" style="color:rgb(128, 203, 196)">&#x27;Content-Length&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> svg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">9</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">10</span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">body</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> svg</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">11</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">12</span><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">13</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre></div><p class="css-1ek8oqb"><a class="link-module--link--bd3ac" href="http://moshfeudev.wixsite.com/shield/_functions/view_demo" target="_blank" rel="noopener noreferrer">Demo</a></p><p class="css-1ek8oqb"><strong class="css-0">Saving the Data</strong></p><p class="css-1ek8oqb">Corvid offers a <a class="link-module--link--bd3ac" href="https://support.wix.com/en/article/corvid-working-with-wix-data" target="_blank" rel="noopener noreferrer">built-in database</a> (‚ÄúContent Manager‚Äù) with a strong yet easy API, called <code class="css-118aluo">wixData</code>.</p><p class="css-1ek8oqb">First thing is creating a table (‚Äúcollection‚Äù) ‚Äî <code class="css-118aluo">views</code> and add the following columns: <code class="css-118aluo">headers</code> (as Text), <code class="css-118aluo">refrer</code> (as Text). This will be enough for the basic app, you can add more of course (I added <code class="css-118aluo">project</code> so I could embed as many resources as I want).</p><p class="css-1ek8oqb">It‚Äôs a good time to mention that, when you create a collection, pay attention to the permission section (‚ÄúWhat‚Äôs the collection for?‚Äù). Start with set ‚Äúanyone‚Äù to all the methods and customize it as you go.</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:300px">
      <a class="link-module--link--bd3ac" href="/static/b7fb8b5be252165b0a647146fd901eb5/5a46d/1SOm7yvZtUtNJmXH5VkeEHA.png">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:125%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+ElEQVQ4y41UW2sbRxTeP+b6pWAcB1NK+1Tykof8nRAagiEtRMYp5CXEpND3XExKacEpUiXZklaR9jJ7kXbnfp8yu7JiWUnaj4/lDMPhnPN9czbYe9jd65QHHbD3JDs8zg462X4nu9XJDo/z/SfZ7mOwyeyro/nOo3DnKNp/8Gfw9cN/Dk6W35zkt47z734pDk/y28fZ4Un+7VMf7P4ENvhztns03fnxYudRuPfgr+D3fjQo1N8J7aW8m/JBoYaFGhSqn/vgstziQl+Uaorcq/NRAECqBEd1zQimBFlr3H/BWuucCydhMI+TJSJhBNKyirMFZtw5Z+xNWreic44rw50bjSfBLIqcc0pppRsqLZVqYtNSKq39V60ppHTOXYzGwXAUQsKKCi5q5AlxUcHRLJ5GYDxPx/N0GoPRLCmbq5ZljRAT73v9IPwwk9oQxikXTEjKPTFlmPL2SyjHhFEu1iSMK2P7w8sgSVMuJKEMEVojXGNcI4wwxYRCTJY1oo0K24JNwqlPXkIcg6KGuL24gW21pTbKJ4dBFCfaWEKZkOoL3lyH0mZVOU5S700DIZWUXkwhpQ+U4kJKpYy116mNWbcNEKFlVVcQQURQMyomFBOGMK0gZlzcaERpY9eVK4QjkNcIu/8HIkwl3XgSBmkKnHPaGNs+I7umXQX+wW20fTVzGMQpUFozLhgXEBHvWeMT8Saz1jC5qeVHq+ZxuoQoBkW5hK1UXi3l4TUT/miMvWGVvkoGXMhljbaF+RxUI3eTnIBmjYwxVqrVbrR7orVpA393DWbtcxSnjIsrY5AfEhGIiZ+csgpihInWG0tu1jPHSVpW8EMMFjV0Vxu7jY+LbR2TRqwqN20LKbU210z60gtvj97nOE68gH42oz9PANVsKaNKzis5XXCq3HgyCbI8F87NiCWf+nm1FZG0935FPzyHd57Du6fw+2fV/T90Es2Ct2fv+pej8+6g2x/2B59mrz/87V3vxdve6Vnv5Vnv9E33zfnFq9ev/wVnrW5d+IA0TgAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="Permissions settings" title="Permissions settings" src="/static/b7fb8b5be252165b0a647146fd901eb5/5a46d/1SOm7yvZtUtNJmXH5VkeEHA.png" srcSet="/static/b7fb8b5be252165b0a647146fd901eb5/5a46d/1SOm7yvZtUtNJmXH5VkeEHA.png 300w" sizes="(max-width: 300px) 100vw, 300px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span><em class="em-module--em--86c77">Permissions settings</em></p><p class="css-1ek8oqb">Now we can modify the endpoint code to extract the relevant information from the request and save it in <code class="css-118aluo">views</code>.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">await</span><span class="token plain"> wixData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">insert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;views&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain">    referer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">    </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">headers</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">stringify</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre></div><p class="css-1ek8oqb">(You can see the logs in the ‚Äú<a class="link-module--link--bd3ac" href="https://support.wix.com/en/article/corvid-about-site-monitoring" target="_blank" rel="noopener noreferrer">Site Monitoring</a>‚Äù)</p><p class="css-1ek8oqb">The nice thing about the <code class="css-118aluo">headers</code> is that they contain geo location information out of the box, so later, we can show a geo location visualization.</p><p class="css-1ek8oqb">Now, when we have all the data, we want to show it visually.</p><p class="css-1ek8oqb"><strong class="css-0">Client App</strong></p><p class="css-1ek8oqb">This step should be straightforward, right? After all, Wix is a UI builder before anything. The good news is that for some components, it‚Äôs true. For example, it‚Äôs very easy to create a table and connect it to the database. It can be done even without coding. But when it comes to more sophisticated visualization elements such as graphs, charts, maps etc. there are no built-in options nor external apps to connect the data to the elements.
So there is no easy way (As fat as I know) but there is a way shown in this <a class="link-module--link--bd3ac" href="https://www.wix.com/corvid/example/create-a-custom-chart" target="_blank" rel="noopener noreferrer">tutorial</a> and that‚Äôs how I did it, but I have to admit that it‚Äôs not that convenient. I hope it will be changed in the future.</p><p class="css-1ek8oqb">In a nutshell, the challenge is that even though we can ‚Äúinteract‚Äù with components through Corvid code, we are not interacting with the DOM itself but with a special isolated DOM <strong class="css-0">like</strong>. As a result, we can‚Äôt use JavaScript libraries which depends on interacting with the actual DOM.
The only (free) way to have access to a DOM is by adding an ‚ÄúHTML iframe‚Äù component. But here is the catch, we can‚Äôt inject data into the iframe directly because the communication between the page and the iframe has to be through post messages.</p><p class="css-1ek8oqb">So here is the flow starts on page ready.</p><ol class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">Get the data from the <code class="css-118aluo">views</code> table.
1.1 In parallel, render the iframe (handle by Wix).
1.2. Establish an event listener to get messages from the iframe.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">The iframe initiating a chart library, establish an event listener to get messages from the page, and posts a message to the parent saying ‚ÄúI‚Äôm ready‚Äù.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">The page (waits for the data if needed and) posts a message back with the data.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">The iframe gets the data and draw the chart accordingly.</p></li></ol><p class="css-1ek8oqb">If I missed you, maybe a diagram will help:</p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:461px">
      <a class="link-module--link--bd3ac" href="/static/7a7eee88a236a80b72f3e86586fb2d8a/9f170/11lH2lnOpgoGDTzvNgCtSEQ.jpg">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:97.66666666666669%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuaxoqiUShf//EABYQAQEBAAAAAAAAAAAAAAAAAEEQIP/aAAgBAQABBQJjn//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABoQAAICAwAAAAAAAAAAAAAAAAABESEQQVH/2gAIAQEAAT8hmy2JrpCG9BJcvESKsf/aAAwDAQACAAMAAAAQo8/A/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFBEFH/2gAIAQEAAT8QAgSm8RTVFl3CZFaRzjc3inV8gURIpyfGAFHn/9k=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="The diagram shows the flow and the communication between the page and the iframe" title="The diagram shows the flow and the communication between the page and the iframe" src="/static/7a7eee88a236a80b72f3e86586fb2d8a/9f170/11lH2lnOpgoGDTzvNgCtSEQ.jpg" srcSet="/static/7a7eee88a236a80b72f3e86586fb2d8a/f93b5/11lH2lnOpgoGDTzvNgCtSEQ.jpg 300w,/static/7a7eee88a236a80b72f3e86586fb2d8a/9f170/11lH2lnOpgoGDTzvNgCtSEQ.jpg 461w" sizes="(max-width: 461px) 100vw, 461px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span><em class="em-module--em--86c77">The diagram shows the flow and the communication between the page and the iframe</em></p><p class="css-1ek8oqb">In this project, I‚Äôm using Google‚Äôs ‚Äú<a class="link-module--link--bd3ac" href="https://developers.google.com/chart/interactive/docs/gallery/linechart" target="_blank" rel="noopener noreferrer">Line Chart</a>‚Äù so we need to fit the data to the <code class="css-118aluo">[DataTable</code>](<a class="link-module--link--bd3ac" href="https://developers.google.com/chart/interactive/docs/datatables_dataviews#emptytable" target="_blank" rel="noopener noreferrer">https://developers.google.com/chart/interactive/docs/datatables_dataviews#emptytable</a>) format.</p><p class="css-1ek8oqb"><strong class="css-0">The iframe‚Äôs code</strong></p><p class="css-1ek8oqb"><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:300px">
      <a class="link-module--link--bd3ac" href="/static/69c369ba366927507677543742922102/5a46d/1Vr05wRrYTy64LyAdl1x-sg.png">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:127.33333333333331%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAACt0lEQVQ4y42US2sUQRDH9+N4E4yCBy+GIIgo+ok8iuAhELKBxASj8SsIouBto9mjmOzGzb4fM9PTM9Mz/X5K7+S1yW5M8aPoZubfVV1VdCVCog1oDxRRghARmCnC9S2pUK6Ho2Gr1TpsNFKEnHPm1lSYtNJY45y2VmqjrbsZaS7WXqyme3V6xH+w7vTnGfFCjNXGqjMPiFbGlkeUabtFCG1Bkg3HwXASggg0R+lqDdWPR1++fi8o92JjnfPpmDM/A8NZBiZpHBRJmOXFQSedQHTSHTCpKlrbPxNSrcH1WrxRi6tTNvbjzZ+wZOsg2TpIt+tpdT+tD4hvhw/mfcVZs/0L3l0Pnu/FTz6Ap7vg2UewvBM92Ajve6KltcG9d42l1ZM7b49ff4ud1UK7si9evFuHj7aCV5/Bi0/g5R7wi71oeSdc8UTL78ePq+2Vzf7Dtc6bH158XuAKE7oPyRFQR0AdAnkYndIAshmr0jehaUJ9FJsOIEKqiz77eWRca4WyVHCmBBOccUal4EWOBOfukjHOmVDn41BJiUKESW2ptDBJQxAnGQIwCQFkXNhpYUqsc5jOigumMWVC2YJbhFAEYJ4XKcpgkkgp3awRNivGTHHORkj/DiTOMxDDaYz5NkdcEOanxE+i0cZYa421xlwcYa2fzTliJjQmzBhDKOdCciEZFyWUcTpdSKXs3MijcRDDRGuDcowpo4wXmGLCCOOY0LwgWY4JZfPTbnW6QQicc5Mg7A/HkyBstbvDcdAbjEIQW2tvunOc4TTHWut2r//3pJNmiAtBKSsKTCi9fPM5YioMpn4Swihud/sQpm6xXa+2zgl1zuUFbnd9cExIWeErOc8Tc122SikdhKDTG8AkLcXXI9PraReUl70RUpWcd+sKmHFx6ZGscGWFMpRL7L9N4YIsQKiZ5/UfQU+GAJ81x10AAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image css-0" alt="Luckily, we don‚Äôt need to host the iframe‚Äôs code anywhere, we can set its code directly in the Editor [2]." title="Luckily, we don‚Äôt need to host the iframe‚Äôs code anywhere, we can set its code directly in the Editor [2]." src="/static/69c369ba366927507677543742922102/5a46d/1Vr05wRrYTy64LyAdl1x-sg.png" srcSet="/static/69c369ba366927507677543742922102/5a46d/1Vr05wRrYTy64LyAdl1x-sg.png 300w" sizes="(max-width: 300px) 100vw, 300px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async"/>
  </a>
    </span><em class="em-module--em--86c77">Luckily, we don‚Äôt need to host the iframe‚Äôs code anywhere, we can set its code directly in the Editor <!-- -->[2]<!-- -->.</em></p><p class="css-1ek8oqb">Here is the code (notice the ‚Äúloader‚Äù üòâ)</p><div class="gatsby-highlight" data-language="html"><pre class="prism-code language-html" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token doctype punctuation" style="color:rgb(199, 146, 234);font-style:italic">&lt;!</span><span class="token doctype doctype-tag" style="color:rgb(199, 146, 234);font-style:italic">DOCTYPE</span><span class="token doctype" style="color:rgb(199, 146, 234);font-style:italic"> </span><span class="token doctype name" style="color:rgb(199, 146, 234);font-style:italic">html</span><span class="token doctype punctuation" style="color:rgb(199, 146, 234);font-style:italic">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag" style="color:rgb(127, 219, 202)"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token tag" style="color:rgb(127, 219, 202)">      </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">text/javascript</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token tag" style="color:rgb(127, 219, 202)">      </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">src</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">https://www.gstatic.com/charts/loader.js</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag" style="color:rgb(127, 219, 202)"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token tag" style="color:rgb(127, 219, 202)">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">chart_div</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">div</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">9</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">siv</span><span class="token tag" style="color:rgb(127, 219, 202)"> </span><span class="token tag attr-name" style="color:rgb(173, 219, 103);font-style:italic">id</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(199, 146, 234)">=</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag attr-value" style="color:rgb(127, 219, 202)">loading</span><span class="token tag attr-value punctuation" style="color:rgb(199, 146, 234)">&quot;</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Loading...</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">siv</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">11</span><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">12</span><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// Initiate google charts</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">13</span><span class="token script language-javascript">      google</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">charts</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">load</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;current&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"> </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">packages</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;corechart&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;line&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">14</span><span class="token script language-javascript">      google</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">charts</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">setOnLoadCallback</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">init</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">15</span><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">16</span><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">onEvent</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript parameter">details</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">17</span><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> data </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">google</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">visualization</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">DataTable</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">18</span><span class="token script language-javascript">        data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addColumn</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;date&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;day&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">19</span><span class="token script language-javascript">        data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addColumn</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;number&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;Page Views&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">20</span><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">21</span><span class="token script language-javascript">        data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addRows</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token script language-javascript spread operator" style="color:rgb(127, 219, 202)">...</span><span class="token script language-javascript">details</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">22</span><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">23</span><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> options </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">24</span><span class="token script language-javascript">          </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">pointSize</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript number" style="color:rgb(247, 140, 108)">5</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">25</span><span class="token script language-javascript">          </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">hAxis</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">26</span><span class="token script language-javascript">            </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">title</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;Time&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">27</span><span class="token script language-javascript">            </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">format</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;dd/MM/yy&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">28</span><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">29</span><span class="token script language-javascript">          </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">vAxis</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">30</span><span class="token script language-javascript">            </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">title</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;Popularity&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">31</span><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">32</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">33</span><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">34</span><span class="token script language-javascript">        </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> chart </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">new</span><span class="token script language-javascript"> </span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">google</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">visualization</span><span class="token script language-javascript class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript class-name" style="color:rgb(255, 203, 139)">LineChart</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">35</span><span class="token script language-javascript">          </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">getElementById</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;chart_div&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">36</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">37</span><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">38</span><span class="token script language-javascript">        chart</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">draw</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> options</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">39</span><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">40</span><span class="token script language-javascript" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">41</span><span class="token script language-javascript">      </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">function</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">init</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">42</span><span class="token script language-javascript">        </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// Listen to messages from the page</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">43</span><span class="token script language-javascript">        </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;message&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript parameter"> </span><span class="token script language-javascript parameter literal-property property" style="color:rgb(128, 203, 196)">data</span><span class="token script language-javascript parameter operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript parameter"> </span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript parameter"> type</span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript parameter"> data </span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript parameter"> </span><span class="token script language-javascript parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">44</span><span class="token script language-javascript">          </span><span class="token script language-javascript keyword control-flow" style="color:rgb(127, 219, 202)">if</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">type </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">===</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;graph&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">45</span><span class="token script language-javascript">            </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">onEvent</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript">data</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">46</span><span class="token script language-javascript">            </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;#loading&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">style</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">display</span><span class="token script language-javascript"> </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;none&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">47</span><span class="token script language-javascript">          </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">48</span><span class="token script language-javascript">        </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">49</span><span class="token script language-javascript">      </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">50</span><span class="token script language-javascript">      </span><span class="token script language-javascript comment" style="color:rgb(99, 119, 119);font-style:italic">// Tell the page the iframe&#x27;s ready</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">51</span><span class="token script language-javascript">      </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript property-access">parent</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">postMessage</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"> </span><span class="token script language-javascript literal-property property" style="color:rgb(128, 203, 196)">type</span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">:</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;ready&#x27;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;*&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">52</span><span class="token script language-javascript">    </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">53</span><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">body</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">54</span><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">html</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre></div><p class="css-1ek8oqb"><strong class="css-0">The page code</strong></p><div class="gatsby-highlight" data-language="javascript"><pre class="prism-code language-javascript" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword module" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token imports">wixData</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;wix-data&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain"></span><span class="token keyword module" style="color:rgb(127, 219, 202)">import</span><span class="token plain"> </span><span class="token imports">_</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;lodash&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">$w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">onReady</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> getDataPromise </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> wixData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;views&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">find</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// The iframe is ready</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">$w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;#html1&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">onMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter"> data </span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">9</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">===</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;ready&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">10</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> results </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">await</span><span class="token plain"> getDataPromise</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">12</span><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Group the rows by date and map it to DataTable format</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">13</span><span class="token plain">      </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> chartData </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 139)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">entries</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">14</span><span class="token plain">        _</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">groupBy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">results</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">items</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">_createdDate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toDateString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">15</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token parameter">date</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> entities</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">date</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> entities</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">16</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">17</span><span class="token plain">      </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// Post back to the page with the data</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">18</span><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">$w</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;#html1&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">postMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">19</span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">type</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;graph&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">20</span><span class="token plain">        </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">data</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> chartData</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">21</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">22</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">23</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">24</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">And the result</p><p class="css-1ek8oqb"><img src="/46e3d09505a0bc6b3284e57599d5d2b5/1GjLlNxfqhTIzS615wK-w1A.gif" alt="How it looks on Chrome" class="css-0"/><em class="em-module--em--86c77">How it looks on Chrome</em></p><p class="css-1ek8oqb">If you don‚Äôt want this page to be visible to everyone, <a class="link-module--link--bd3ac" href="https://support.wix.com/en/article/limiting-pages-on-your-site-to-specific-members-member-roles" target="_blank" rel="noopener noreferrer">you can limit it</a>.</p><p class="css-1ek8oqb">This is it basically. From this point you can take it to wherever your imagination can take you ‚Äî hit maps, different categorization, comparing timestamp etc. If you need my help with that, leave a comment or reach out.</p><p class="css-1ek8oqb">If you want to get a copy of this website, let me know and I‚Äôll send a copy to your Wix account.</p><p class="css-1ek8oqb">And usually, if you have questions or ideas about how to improve this post (or my other posts), leave a comment or say hi üëã
<a class="link-module--link--bd3ac" href="https://www.linkedin.com/in/moshfeu/" target="_blank" rel="noopener noreferrer"><strong class="css-0">Moshe Feuchtwanger - Frontend Developer - Wix.com | LinkedIn</strong><em class="em-module--em--86c77">View Moshe Feuchtwanger&#x27;s profile on LinkedIn, the world&#x27;s largest professional community. Moshe has 7 jobs listed on‚Ä¶</em>www.linkedin.com</a></p><p class="css-1ek8oqb">[1]<!-- --> The endpoint can also respond with another image types such as png, jpg etc. encoded by base64</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> img </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword module" style="color:rgb(127, 219, 202)">from</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2PgjOr/DwADVAHy2H3MYgAAAABJRU5ErkJggg==&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;base64&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> response </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain">  </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">headers</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">    </span><span class="token string-property property" style="color:rgb(128, 203, 196)">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;image/png&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain">    </span><span class="token string-property property" style="color:rgb(128, 203, 196)">&#x27;Content-Length&#x27;</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> img</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">length</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain">  </span><span class="token literal-property property" style="color:rgb(128, 203, 196)">body</span><span class="token operator" style="color:rgb(127, 219, 202)">:</span><span class="token plain"> img</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">9</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">10</span><span class="token plain"></span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">[2]<!-- --> Yah, it‚Äôs a bit annoying to edit the code in the Editor, copy / paste it in your favorite code editor and then copy / paste it back.</p><a class="link-module--link--bd3ac" href="https://medium.com/swlh/build-your-own-analytics-tool-on-corvid-by-wix-cd12ae76d291" target="_blank" rel="noopener noreferrer">Original Post</a></section></article></main></div></div><footer class="footer-module--footer--675c6"><style data-emotion="css 1jso6df">.css-1jso6df{-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:8px;}</style><style data-emotion="css diw1ju">.css-diw1ju{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:8px;}</style><ul class="css-diw1ju"><li><a rel="prev" href="/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2/">‚Üê <!-- -->How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 2</a></li><li><a rel="next" href="/show-tooltip-on-pointer-events-none-element/">Show tooltip on pointer-events none element<!-- --> ‚Üí</a></li></ul><span class="footer-module--no-copyright--7d572" title="No Copyright Intended"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" width="20" height="20" fill="#b5e853"><g><path d="M0,256c0.02,141.39,114.61,255.98,256,256c141.39-0.02,255.98-114.61,256-256C511.98,114.61,397.39,0.02,256,0   C114.61,0.02,0.02,114.61,0,256c0,14.14,11.46,25.6,25.6,25.6s25.6-11.46,25.6-25.6c0.01-56.64,22.88-107.67,59.98-144.82   C148.33,74.08,199.36,51.21,256,51.2c56.63,0.01,107.67,22.88,144.82,59.98c37.1,37.14,59.97,88.18,59.98,144.82   c-0.01,56.63-22.88,107.67-59.98,144.82c-37.14,37.1-88.18,59.97-144.82,59.98c-56.64-0.01-107.67-22.88-144.82-59.98   C74.08,363.67,51.21,312.64,51.2,256c0-14.14-11.46-25.6-25.6-25.6S0,241.86,0,256L0,256z"></path><path d="M324.1,179.17c-19.42-17.08-43.77-25.61-67.85-25.58c-26.93-0.03-53.98,10.63-74.06,31.48l0,0   c-19.04,19.74-28.64,45.44-28.62,70.94c-0.03,25.49,9.58,51.2,28.62,70.94l0,0c20.08,20.85,47.13,31.51,74.06,31.48   c24.08,0.02,48.43-8.5,67.85-25.58c10.62-9.33,11.66-25.51,2.33-36.13c-9.33-10.62-25.51-11.66-36.13-2.33   c-9.84,8.64-21.87,12.82-34.05,12.84c-13.64-0.03-27.03-5.27-37.19-15.8l0,0c-9.57-9.94-14.26-22.57-14.28-35.41   c0.03-12.84,4.72-25.47,14.28-35.41l0,0c10.16-10.53,23.55-15.78,37.19-15.8c12.19,0.02,24.21,4.21,34.05,12.84   c10.62,9.33,26.8,8.29,36.13-2.33C335.76,204.68,334.72,188.5,324.1,179.17L324.1,179.17z"></path><path d="M84.3,120.5l38.4,38.4c10,10,26.21,10,36.2,0c10-10,10-26.21,0-36.2l-38.4-38.4c-10-10-26.21-10-36.2,0   S74.3,110.5,84.3,120.5"></path><path d="M353.1,389.3l38.4,38.4c10,10,26.21,10,36.2,0c10-10,10-26.21,0-36.2l-38.4-38.4c-10-10-26.21-10-36.2,0   S343.1,379.3,353.1,389.3"></path></g></svg></span> <!-- -->2026<!-- --> - Moshe Feuchtwanger</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118358576-1"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-118358576-1', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/build-your-own-analytics-tool-on-corvid-by-wix/";window.___webpackCompilationHash="32a63582809edb8b3488";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-c36d90ce4a49d54da991.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-ceb13f80f566e4cd42ed.js"],"component---src-components-post-js":["/component---src-components-post-js-6709b8098da66a2f4c52.js"],"component---src-pages-404-js":["/component---src-pages-404-js-4d725be78be32f2431c8.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-1adffd399be1b88f9c9a.js"]};/*]]>*/</script><script src="/app-c36d90ce4a49d54da991.js" async=""></script><script src="/framework-4b792b97593cf52a3906.js" async=""></script><script src="/webpack-runtime-21f07d3f8a0b161dacb0.js" async=""></script></body></html>