{"componentChunkName":"component---src-components-post-js","path":"/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2/","result":{"data":{"site":{"siteMetadata":{"title":"Moshe Feuchtwanger","social":[{"name":"twitter","url":"https://twitter.com/moshfeu"},{"name":"github","url":"https://github.com/moshfeu"},{"name":"linkedin","url":"https://www.linkedin.com/in/moshfeu/"},{"name":"stackoverflow","url":"https://stackoverflow.com/users/863110/mosh-feu"},{"name":"visualstudiocode","url":"https://marketplace.visualstudio.com/publishers/moshfeu"}]}},"mdx":{"id":"2767e464-c225-5256-8a62-a779888354a0","excerpt":"In the previous post I talked about the purpose of the project (Make an HTML5 game controlled by “external controller”), the final product…","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2\",\n  \"date\": \"2020-04-25T02:23:42.982Z\",\n  \"author\": \"Mosh Feu\",\n  \"title\": \"How to build an HTML5 game’s controller with Arduino, NodeJS and socket.io — Part 2\",\n  \"images\": [\"1gGU1WZtUfIo8JxEZxgXrKQ.jpeg\", \"1gGU1WZtUfIo8JxEZxgXrKQ.jpeg\", \"1CzeVM2RtOl7-8J0I_DQg-g.gif\"],\n  \"tags\": [\"html5\", \"html5-games\", \"socketio\"],\n  \"keywords\": [\"html5\", \"html5-games\", \"socketio\"],\n  \"canonical\": \"https://moshfeu.medium.com/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2-bbd01bf36481\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In the previous post I talked about the purpose of the project (Make an HTML5 game controlled by \\u201Cexternal controller\\u201D), the final product (An Arduino controller) and showed the first step (\\u201Ccontrol it from a different browser window using the same keyboard keys\\u201D)\\nIf you\\u2019re interested in the server code, you should check it because we\\u2019re basically done with it. (Maybe we\\u2019ll add a bit server code in this post but it will relay on the existing mechanizm)\\\"\"), mdx(\"p\", null, \"In this post, we gonna talk about the second step \\u2014 \\u201Ccontrol it from a mobile phone on the same network of course.\\u201D\"), mdx(\"p\", null, \"To make things more interesting, I wanted to make the controller more \\u201Creal\\u201D \\u2014 means not just regular buttons for moving right and left but using a virtual \\u201Cjoystick\\u201D.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/ccb40a79e528fd8c96b98c029ecc6201/0f98f/1gGU1WZtUfIo8JxEZxgXrKQ.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"66.66666666666666%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGLZkTWSD//xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIREv/aAAgBAQABBQLSq6NQ7HRp/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAEDAQE/AcR//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEhEf/aAAgBAgEBPwGqGn//xAAaEAACAgMAAAAAAAAAAAAAAAAAASFBEBIx/9oACAEBAAY/Ao4US2a1n//EABsQAQACAgMAAAAAAAAAAAAAAAEAESFBUWHw/9oACAEBAAE/Ic2xi+uPXQ0QTJnoihQhBi+Z/9oADAMBAAIAAwAAABAfL//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEVH/2gAIAQMBAT8QBA2u3//EABcRAAMBAAAAAAAAAAAAAAAAAAABEXH/2gAIAQIBAT8QdGMH/8QAHRABAAIDAQADAAAAAAAAAAAAAQARITFBUWGxwf/aAAgBAQABPxBKIcJrbvDsQsbB0fUfqDWHsCpXGdnuYGXNddsDQrB8fs//2Q==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Image by [Martinelle](https://pixabay.com/users/Martinelle-495565/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2905361) from [Pixabay](https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2905361) — joystick, but real\",\n    \"title\": \"Image by [Martinelle](https://pixabay.com/users/Martinelle-495565/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2905361) from [Pixabay](https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2905361) — joystick, but real\",\n    \"src\": \"/static/ccb40a79e528fd8c96b98c029ecc6201/e5166/1gGU1WZtUfIo8JxEZxgXrKQ.jpg\",\n    \"srcSet\": [\"/static/ccb40a79e528fd8c96b98c029ecc6201/f93b5/1gGU1WZtUfIo8JxEZxgXrKQ.jpg 300w\", \"/static/ccb40a79e528fd8c96b98c029ecc6201/b4294/1gGU1WZtUfIo8JxEZxgXrKQ.jpg 600w\", \"/static/ccb40a79e528fd8c96b98c029ecc6201/e5166/1gGU1WZtUfIo8JxEZxgXrKQ.jpg 1200w\", \"/static/ccb40a79e528fd8c96b98c029ecc6201/d9c39/1gGU1WZtUfIo8JxEZxgXrKQ.jpg 1800w\", \"/static/ccb40a79e528fd8c96b98c029ecc6201/0f98f/1gGU1WZtUfIo8JxEZxgXrKQ.jpg 1920w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Image by \", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://pixabay.com/users/Martinelle-495565/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2905361\"\n  }, \"Martinelle\"), \" from \", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://pixabay.com/?utm_source=link-attribution&utm_medium=referral&utm_campaign=image&utm_content=2905361\"\n  }, \"Pixabay\"), \" \\u2014 joystick, but real\")), mdx(\"p\", null, \"Like any developer (I hope) I don\\u2019t like to write a code if I have the option no to (It\\u2019s a paradox, I know). So I found a great library for a virtual joystick with very advanced features \\u2014 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://yoannmoi.net/nipplejs/\"\n  }, \"nippleJS\"), \".\"), mdx(\"p\", null, \"For my purpose, I don\\u2019t need all those advanced features but only need to know if the user want to move right or left. The fire button will be a different button with a similar look and feel.\"), mdx(\"p\", null, \"The initialization code is\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"var options = {\\n    zone: document.querySelector('.zone'),\\n    mode: 'static',\\n    position: {left: '50%', top: '50%'},\\n    color: 'red',\\n    lockX: true,\\n};\\nconst manager = nipplejs.create(options);\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"zone\"), \" \\u2014 the DOM element which the joystick will rendered in\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"mode: \\u2018static'\"), \" \\u2014 otherwise the joystick will showed where the user will touch on the screen. I want it to be static for simplicity experience\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"position\"), \" \\u2014 basically center\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"color\"), \" \\u2014 duh\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"lockX: true\"), \" \\u2014 I need only to allow only right to left \\u2014 x-axis\\u05E5\"))), mdx(\"p\", null, \"The result\"), mdx(\"iframe\", {\n    src: \"https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fcodepen.io%2Fmoshfeu%2Fembed%2Fpreview%2FKKdWxON%3Fheight%3D600%26slug-hash%3DKKdWxON%26default-tabs%3Djs%2Cresult%26host%3Dhttps%3A%2F%2Fcodepen.io&display_name=CodePen&url=https%3A%2F%2Fcodepen.io%2Fmoshfeu%2Ffull%2FKKdWxON&image=https%3A%2F%2Fscreenshot.codepen.io%2F102536.KKdWxON.small.5c130d83-7916-4e09-a03b-caad1727ee4c.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codepen\",\n    width: \"100%\",\n    height: \"600\"\n  }), mdx(\"p\", null, \"Now, I need to trigger the key handlers in the game host through the socket. (Seriously, if you haven\\u2019t read the first post, now is a good time)\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const KEY_CODES = { left: 37, right: 39, fire: 32 };\\nlet lastDirection;\\n\\nfunction emit(type, keyCode) {\\n  socket.emit('event', {type, keyCode})\\n}\\n\\nmanager.on('dir end', (_, info) => {\\n  // user ended the interaction or change the direction\\n  if (!info.direction || info.direction.x !== lastDirection) {\\n    emit('keyup', KEY_CODES[lastDirection]);\\n  }\\n  // \\\"Optional chaining\\\" is so cool (unless you read it in after 2022, so it's obvious now)\\n  lastDirection = info.direction?.x;\\n  if (lastDirection) {\\n    emit('keydown', KEY_CODES[lastDirection]);\\n  }\\n});\\n\")), mdx(\"p\", null, \"I need to store the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"lastDirection\"), \" in case the user will push the stick to one side and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"then\"), \" to other side \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"without\"), \" stop in order to trigger the first side \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"keyup\"), \". Only then I can trigger the current side \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"keydown\"), \".\"), mdx(\"h2\", null, \"The fire button\"), mdx(\"p\", null, \"The logic is similar \\u2014 to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"emit\"), \" the fire keys events on touches handlers\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const fireButton = document.querySelector('.fire');\\nfireButton.addEventListener('touchstart', () => emit('keyup', KEY_CODES.fire));\\nfireButton.addEventListener('touchend', () => emit('keydown', KEY_CODES.fire));\\n\")), mdx(\"p\", null, \"And because I want the fire button to has the same look and feel as the joystick:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-css\"\n  }, \".fire {\\n  position: absolute;\\n  bottom: 50px;\\n  left: 50px;\\n  width: 100px;\\n  height: 100px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  opacity: 0.5;\\n  border-radius: 100%;\\n  border: 0;\\n  background: none;\\n  outline: 0;\\n  transition: opacity .3s ease;\\n}\\n\\n.fire:before,\\n.fire:after {\\n  content: \\\"\\\";\\n  display: block;\\n  width: 50px;\\n  height: 50px;\\n  background: red;\\n  opacity: 0.5;\\n  border-radius: 50%;\\n  position: absolute;\\n}\\n\\n.fire:after {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.fire:active {\\n  opacity: 1;\\n}\\n\")), mdx(\"h2\", null, \"The server\"), mdx(\"p\", null, \"The last thing I need to do in order to allow both of the clients to communicate is to expose the server to the local network because currently it\\u2019s running only in my local machine (localhost).\"), mdx(\"p\", null, \"For that, I\\u2019m using a great library (and utility) \\u2014 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/zeit/serve-handler\"\n  }, \"serve-handler\"), \" \\u201CThe foundation of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/serve\"\n  }, \"serve\"), \"\\u201D.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-diff\"\n  }, \"+const handler = require('serve-handler');\\n const express = require('express');\\n const app = express();\\n-const http = require('http').createServer(app);\\n+const http = require('http').createServer((request, response) => handler(request, response));\\n\")), mdx(\"p\", null, \"But what\\u2019s the URL of the game host? \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"localhost\"), \" is only working on the same machine.\\nThe address is the local network IP. To make it easier, the server will log the full address.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"http.listen(3000, () => {\\n  console.log(`listening on ${getIPAddress()}:3000`);\\n});\\n\\nfunction getIPAddress() {\\n  const interfaces = require('os').networkInterfaces();\\n  for (const devName in interfaces) {\\n    const iface = interfaces[devName];\\n\\nfor (let i = 0; i < iface.length; i++) {\\n      const alias = iface[i];\\n      if (alias.family === 'IPv4' && alias.address !== '127.0.0.1' && !alias.internal)\\n        return alias.address;\\n    }\\n  }\\n\\n  return '0.0.0.0';\\n}\\n\")), mdx(\"p\", null, \"Thanks to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://stackoverflow.com/a/15075395/863110\"\n  }, \"https://stackoverflow.com/a/15075395/863110\")), mdx(\"p\", null, \"When I reached that point, everything is working but.. not as expected. The problem is, when the user push the stick to the one side and then \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"start\"), \" to moving to the other side, the stick hasn\\u2019t reached the center so, technically, it\\u2019s still in the right. But the user \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"want\"), \" the mothership to go to the left. Although after a moment it will go to the left, the experience is not perfect.\"), mdx(\"p\", null, \"This joystick\\u2019s behaviour is makes sense when combining the direction with \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"force\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"distance\"), \". When the gamer has the ability to control the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"speed\"), \" of the character, those options come into account. In the case I described a moment ago, the character doesn\\u2019t need to go left in the first left movement but it should \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"slows down\"), \" the character. Only when the joystick reached the center the character should start moving left.\"), mdx(\"p\", null, \"I started to think to get rid of the lovely joystick. Maybe it\\u2019s too advanced for my needs.\"), mdx(\"p\", null, \"After few days, I ended up with a brand new \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/jjoystick\"\n  }, \"Web Component\"), \" (which was an adventure on its own). But.. sadly, it\\u2019s not solves the problem entirely.\"), mdx(\"p\", null, \"I decided that it\\u2019s good enough. After all I want to focus on the Arduino part and less on the web \\u201Ccontroller\\u201D.\"), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"/036713261d8589b391f6cb47b9281103/1CzeVM2RtOl7-8J0I_DQg-g.gif\",\n    \"alt\": \"Me, playing the game with my phone\"\n  }), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Me, playing the game with my phone\")), mdx(\"p\", null, \"Thank you for reading.\\nAs usual, comments and questions are very welcome.\"), mdx(\"p\", null, \"\\uD83D\\uDC26\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/moshfeu\"\n  }, \"Tweet\"), \", \\uD83D\\uDC68\\u200D\\uD83D\\uDCBC \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.linkedin.com/in/moshfeu/\"\n  }, \"DM\"), \", \\uD83D\\uDC68\\u200D\\uD83D\\uDD2C \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/moshfeu/AlienInvasion/issues\"\n  }, \"Issue\"), \" me.\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/moshfeu/AlienInvasion\"\n  }, \"Source code\")), mdx(\"p\", null, \"The post is basically comes to its end. But if you want a basic explanation about the joystick, stay here.\"), mdx(\"p\", null, \"In few words, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/Web_Components\"\n  }, \"Web Components\"), \" is a very nice concept which allows to create pure vanila html elements. If you\\u2019re familiar with any of the common components libraries (such as React, Angular, Vue etc.) this concept should sounds very familiar (props, event, lifecycle).\"), mdx(\"p\", null, \"The element I made \\u2014 jjoystick (\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"j\"), \"avascript \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"joystick\"), \" \\u2014 joystick was taken in npm) built on top of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"input[type=range]\"), \" . Left = 1, center = 2, right = 3. It\\u2019s nice because the functionality of moving the \\u201Cstick\\u201D already implemented by the browser and using css, the style can be customized so it will look like.. well.. joystick.\"), mdx(\"p\", null, \"There are some parts when it comes to web components\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Modify the DOM \\u2014 add elements. In this case, the \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"input\"), \".\\nFor example:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const input = document.createElement('input');\\ninput.type = 'range';\\ninput.min = '0';\\ninput.max = '2';\\ninput.value = '1';\\nwrapper.appendChild(input)\\nthis.shadowRoot.appendChild(wrapper);\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Style the elements \\u2014 add \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"style\"), \" tag with the relevant css. The interesting part is that there is no need \\u201Cnamespace\\u201D the selectors because of the \\u201C\", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://css-tricks.com/styling-in-the-shadow-dom-with-css-shadow-parts/\"\n  }, \"shadow DOM\"), \"\\u201D.\\nFor example:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const style = document.createElement('style');\\nstyle.textContent = `\\n  /*css*/\\n  .wrapper {\\n    display: inline-block;\\n    width: 100px;\\n    height: 100px;\\n    background: rgba(255, 0, 0, 0.3);\\n    border-radius: 50%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n  }\\n  /*!css*/\\n`;\\nthis.shadowRoot.appendChild(style);\\n\")), mdx(\"p\", null, \"(You might wonder about the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/*css*/\"), \" annotations. It\\u2019s because \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"textContent\"), \" is a string but I like \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://marketplace.visualstudio.com/items?itemName=iuyoy.highlight-string-code\"\n  }, \"syntax highlight\"), \").\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Bind events \\u2014 so the consumer could listen to it.\\nFor example:\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"this.element.addEventListener('input', e => {\\n  const {value} = e.target;\\n  const side = this.states[value];\\n  this.dispatchEvent(new CustomEvent('dir', {\\n    detail: side\\n  }));\\n});\\n\")), mdx(\"p\", null, \"So the consumer can listen to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"dir\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"joystick.addEventListener('dir', ({detail}) => console.log(detail) /* right, left */);\\n\")), mdx(\"p\", null, \"You\\u2019re more than welcome to check the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/moshfeu/jjoystick\"\n  }, \"source code\"), \" or \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/jjoystick\"\n  }, \"npm\"), \" it.\"), mdx(\"p\", null, \"This is the end of the post. For real \\uD83D\\uDE01\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2/","frontmatter":{"canonical":"https://moshfeu.medium.com/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2-bbd01bf36481","title":"How to build an HTML5 game’s controller with Arduino, NodeJS and socket.io — Part 2","subtitle":null,"keywords":["html5","html5-games","socketio"],"tags":["html5","html5-games","socketio"],"date":"April 25, 2020","image":null},"childMdxBlogPost":{"imageAlt":null,"imageCaptionLink":null,"imageCaptionText":null,"socialImage":null}},"previous":{"__typename":"MdxBlogPost","id":"8d750f9d-12bc-5dee-bc7c-44e2424cc4c5","excerpt":"During the Covid 19 “vacation” I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino. I wanted…","slug":"/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-1/","title":"How to build an HTML5 game’s controller with Arduino, NodeJS and socket.io — Part 1","date":"April 17, 2020"},"next":{"__typename":"MdxBlogPost","id":"4bd245ba-b18d-5001-99b2-699a72f576e5","excerpt":"Disclaimer: I’m a Frontend developer at Wix, that’s right. But this post written as a result of my experience as a “regular” user. I even…","slug":"/build-your-own-analytics-tool-on-corvid-by-wix/","title":"Build Your Own Analytics Tool on Corvid by Wix","date":"September 24, 2020"}},"pageContext":{"id":"299bed91-1f57-599e-8509-d154f1051315","previousId":"8d750f9d-12bc-5dee-bc7c-44e2424cc4c5","nextId":"4bd245ba-b18d-5001-99b2-699a72f576e5","maxWidth":1380,"slug":"how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2"}},"staticQueryHashes":["2744905544","3090755652","4064581832","511549514","764694655"]}