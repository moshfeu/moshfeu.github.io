{"componentChunkName":"component---src-components-post-js","path":"/notifications-in-chrome-extension/","result":{"data":{"site":{"siteMetadata":{"title":"Moshe Feuchtwanger","social":[{"name":"twitter","url":"https://twitter.com/moshfeu"},{"name":"github","url":"https://github.com/moshfeu"},{"name":"linkedin","url":"https://www.linkedin.com/in/moshfeu/"},{"name":"stackoverflow","url":"https://stackoverflow.com/users/863110/mosh-feu"},{"name":"visualstudiocode","url":"https://marketplace.visualstudio.com/publishers/moshfeu"}]}},"mdx":{"id":"62d2a1f1-287b-5b7f-9cd6-392b164510cd","excerpt":"Notifications are great. When an app wants to take its user attention, usually when a (long) process was done and maybe the user moved to…","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"notifications-in-chrome-extension\",\n  \"date\": \"2019-09-05T16:56:32.512Z\",\n  \"author\": \"Mosh Feu\",\n  \"title\": \"Notifications in Chrome extension\",\n  \"image\": \"12v4NYxcXNLCfB5cH40STzQ.png\",\n  \"images\": [\"12v4NYxcXNLCfB5cH40STzQ.png\", \"1sQAAIbXa5nsb4C625dpopw.png\", \"1t3KLGoOnssS2onj85tJB2g.png\"],\n  \"tags\": [\"javascript\", \"chrome\", \"chrome-extension\", \"notifications\", \"open-source\"],\n  \"keywords\": [\"javascript\", \"chrome\", \"chrome-extension\", \"notifications\", \"open-source\"],\n  \"canonical\": \"https://moshfeu.medium.com/notifications-in-chrome-extension-50aac17b3b7d\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Notifications are great. When an app wants to take its user attention, usually when a (long) process was done and maybe the user moved to another tab or even to another app, a notification will let the user to know about the process and maybe could take them back to the app so they could continue with their interactions.\"), mdx(\"p\", null, \"Google Chrome Extensions are also great. An extension helps a developer to extend the browser / a website functionality by running extra code in the context of specific website(s) or in general.\"), mdx(\"p\", null, \"There are plenty of tutorials about how to write Chrome extensions and the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/getstarted\"\n  }, \"official website\"), \" is also a good resource and contains explanations and examples, so it will not be covered in that post. The post presume that you have already some basic knowledge of developing a Chrome extension but, still, refers to the relevant resources in the right places.\"), mdx(\"h2\", null, \"What we gonna do?\"), mdx(\"p\", null, \"Let\\u2019s take a very basic extension that appends a button in a webpage. Click on that button will cause the browser to display a notification like in the picture in the top of the post.\"), mdx(\"h2\", null, \"Let\\u2019s do this\"), mdx(\"p\", null, \"First, so we could leave it behind, let\\u2019s create the manifest file. Something like this:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"name\\\": \\\"Greeter Robot\\\",\\n  \\\"version\\\": \\\"1.0\\\",\\n  \\\"content_scripts\\\": [\\n    {\\n      \\\"matches\\\": [\\\"http://*/*\\\", \\\"https://*/*\\\"],\\n      \\\"js\\\": [\\n        \\\"js/app.js\\\"\\n      ]\\n    }\\n  ],\\n  \\\"browser_action\\\": {\\n    \\\"default_icon\\\": \\\"icon.png\\\"\\n  },\\n  \\\"manifest_version\\\": 2\\n}\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 1\"), \" - we\\u2019ll use the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/content_scripts\"\n  }, \"content script\"), \" (app.js) to manipulate the site\\u2019s DOM and add a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"&lt;button /&gt;\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const button = document.createElement('button');\\nbutton.textContent = 'Greet me!'\\ndocument.body.insertAdjacentElement('afterbegin', button);\\n\")), mdx(\"p\", null, \"Now, if you\\u2019ll browse, let\\u2019s say StackOverflow, you will see the button very nicely\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/11405bbe4bda3a03015d759a3a905fa2/e515d/1sQAAIbXa5nsb4C625dpopw.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"12%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAfUlEQVQI12P48+Tq24c3n9y+cvvS6c+vnnx/+/zH+xf/f376/+MjEvr0+t61p9fP//jw6vPLJ18e3v348vGnV08ZYtZ/itrwNXrjNyAZu/lH/NZfEJSw9Vf+nl85u3/FbfmVsO135LrPoas/xG39Fbf5Z9yWn1Gbfxbs/gEAfSVf+LeBNz0AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"The button that the extension added\",\n    \"title\": \"The button that the extension added\",\n    \"src\": \"/static/11405bbe4bda3a03015d759a3a905fa2/c1b63/1sQAAIbXa5nsb4C625dpopw.png\",\n    \"srcSet\": [\"/static/11405bbe4bda3a03015d759a3a905fa2/5a46d/1sQAAIbXa5nsb4C625dpopw.png 300w\", \"/static/11405bbe4bda3a03015d759a3a905fa2/0a47e/1sQAAIbXa5nsb4C625dpopw.png 600w\", \"/static/11405bbe4bda3a03015d759a3a905fa2/c1b63/1sQAAIbXa5nsb4C625dpopw.png 1200w\", \"/static/11405bbe4bda3a03015d759a3a905fa2/e515d/1sQAAIbXa5nsb4C625dpopw.png 1430w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"The button that the extension added\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Step 2\"), \" - we\\u2019ll add it a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"click\"), \" handler, just to make sure it works\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"const button = document.createElement('button');\\nbutton.textContent = 'Greet me!'\\ndocument.body.insertAdjacentElement('afterbegin', button);\\nbutton.addEventListener('click', () => {\\n  console.log('Clicked');\\n});\\n\")), mdx(\"p\", null, \"And it does\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1200px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/fbfa36abae6498c6264796b3f53504c9/f3015/1t3KLGoOnssS2onj85tJB2g.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"10.333333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhUlEQVQI1wF6AIX/AOfa1NrX1tHOzt/c3Ofk4+rn5u7r6+7q6u3r69TOzd7c2+Xi4uLb3ODf4OXl5OTj4+fp6+zt7/Ly8ejo6ABfotZboNVZndNdodZfpNlepNlpq91urd1hpttboNVeothgpNpgpdlYoNi+1urw7Onk5ujw8PHq6urr6+t84F9bCLCyXgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Click on the button, log “clicked”\",\n    \"title\": \"Click on the button, log “clicked”\",\n    \"src\": \"/static/fbfa36abae6498c6264796b3f53504c9/c1b63/1t3KLGoOnssS2onj85tJB2g.png\",\n    \"srcSet\": [\"/static/fbfa36abae6498c6264796b3f53504c9/5a46d/1t3KLGoOnssS2onj85tJB2g.png 300w\", \"/static/fbfa36abae6498c6264796b3f53504c9/0a47e/1t3KLGoOnssS2onj85tJB2g.png 600w\", \"/static/fbfa36abae6498c6264796b3f53504c9/c1b63/1t3KLGoOnssS2onj85tJB2g.png 1200w\", \"/static/fbfa36abae6498c6264796b3f53504c9/d61c2/1t3KLGoOnssS2onj85tJB2g.png 1800w\", \"/static/fbfa36abae6498c6264796b3f53504c9/f3015/1t3KLGoOnssS2onj85tJB2g.png 1804w\"],\n    \"sizes\": \"(max-width: 1200px) 100vw, 1200px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \"), mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Click on the button, log \\u201Cclicked\\u201D\")), mdx(\"h2\", null, \"Let\\u2019s show a Notification\"), mdx(\"p\", null, \"The obvious step is to go to the Notification \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/notifications\"\n  }, \"official docs\"), \". There we can find the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/notifications#methods\"\n  }, \"API\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"chrome.notifications.create(string notificationId, NotificationOptions options, function callback)\\n\")), mdx(\"p\", null, \"So in our case, we will call that code:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"chrome.notifications.create('', {\\n  title: 'Just wanted to notify you',\\n  message: 'How great it is!',\\n  iconUrl: '/robot-face_1f916.png',\\n  type: 'basic'\\n});\\n\")), mdx(\"p\", null, \"Sadly, we get the error\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Uncaught TypeError: Cannot read property \\u2018create\\u2019 of undefined\")), mdx(\"h2\", null, \"Why?\"), mdx(\"p\", null, \"This API method (Among others) not meant to be called from a content script (remember?) but only from background script\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Content scripts can access Chrome APIs used by their parent extension by exchanging \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/messaging\"\n  }, \"**messages\"), \"** with the extension\")), mdx(\"p\", null, \"This gives us also the solution \\u2014 using a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/background_pages\"\n  }, \"background script\"), \".\"), mdx(\"p\", null, \"So instead of calling directly to the Notification API from the client script, we should send a message to the background script with the options and create the notification from there.\"), mdx(\"h2\", null, \"How it will look?\"), mdx(\"p\", null, \"First, we need to (create and) \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.chrome.com/extensions/background_pages#manifest\"\n  }, \"register\"), \" another script \\u2014 the background script, in the manifest file\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"\\\"background\\\" : {\\n  \\\"scripts\\\" : [\\\"js/background.js\\\"],\\n  \\\"persistent\\\": false\\n}\\n\")), mdx(\"p\", null, \"And now, we could send to that script a message that we want to display a notification.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"app.js (content script)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"button.addEventListener('click', () => {\\n  chrome.runtime.sendMessage('', {\\n    type: 'notification',\\n    options: {\\n      title: 'Just wanted to notify you',\\n      message: 'How great it is!',\\n      iconUrl: '/icon.png',\\n      type: 'basic'\\n    }\\n  });\\n});\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"background.js (background script)\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"chrome.runtime.onMessage.addListener(data => {\\n  if (data.type === 'notification') {\\n    chrome.notifications.create('', data.options);\\n  }\\n});\\n\")), mdx(\"p\", null, \"Now, the extension will present a notification just like in the picture in the top of the post.\"), mdx(\"h2\", null, \"Source Code\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/moshfeu/chrome-extension-notification-demo\"\n  }, \"https://github.com/moshfeu/chrome-extension-notification-demo\")), mdx(\"p\", null, \"Have something to say? I\\u2019ll love to \\uD83D\\uDC42\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"notifications-in-chrome-extension/","frontmatter":{"canonical":"https://moshfeu.medium.com/notifications-in-chrome-extension-50aac17b3b7d","title":"Notifications in Chrome extension","subtitle":null,"keywords":["javascript","chrome","chrome-extension","notifications","open-source"],"tags":["javascript","chrome","chrome-extension","notifications","open-source"],"date":"September 05, 2019","image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDUlEQVQY042QTU+EMBCG+ade9f9oTLx5UhMDJp5M9ixZExMC8tFFochHaUsgaYECe9mhxJsxPk0nM5N3OjM16romhFRVBQbOhg4JpTSKIoSQ67qe5zmOY9s2xhh8EOR5bnDegFdTWpSk/I1cUxTFtyZNU0hmGeaMG5TyL5wElsmSEMWfB4TgYWgYx7Hv+0EQZFnWdV3TNJzzcRhM6+n2+vLh/g6SxqLUe3K4eb7iyav7EXneOmEYhtvk0AT2Al3btlAPxS+73dn5xaNpSSkNNY6MccLL1eptt19gEMNKuiH7AXyY/22/x2kqhDDmeR76XggJgdSIPwGBUqoHZL8WL8uy3v8B+mmajssxo8UJKgF4E0lNvhMAAAAASUVORK5CYII=","aspectRatio":2.6744186046511627,"src":"/static/a4f0aa8cf9d1061185e430ede7674396/3e48c/12v4NYxcXNLCfB5cH40STzQ.png","srcSet":"/static/a4f0aa8cf9d1061185e430ede7674396/2d618/12v4NYxcXNLCfB5cH40STzQ.png 345w,\n/static/a4f0aa8cf9d1061185e430ede7674396/3c741/12v4NYxcXNLCfB5cH40STzQ.png 690w,\n/static/a4f0aa8cf9d1061185e430ede7674396/3e48c/12v4NYxcXNLCfB5cH40STzQ.png 766w","sizes":"(max-width: 766px) 100vw, 766px"}}}},"childMdxBlogPost":{"imageAlt":null,"imageCaptionLink":null,"imageCaptionText":null,"socialImage":null}},"previous":{"__typename":"MdxBlogPost","id":"a4a967b3-7bab-5a16-a596-cc255230f70b","excerpt":"StackOverflow is one of (if not THE) the top common Q & A websites in the world. When you ask Google a code question, StackOverflow’s result…","slug":"/is-stackoverflow-a-friend-how-to-make-it-love-you/","title":"Is StackOverflow a friend? How to make it love you?","date":"June 06, 2019"},"next":{"__typename":"MdxBlogPost","id":"f3b96f7a-198d-563f-a7fb-c0e73e0feabd","excerpt":"This post meant to introduce the journey of the Visual Studio Code (“vscode”) plugin  CompareFolders . The post is (will be) part of a…","slug":"/comparefolders-visual-studio-code-extension-journey-intro/","title":"CompareFolders Visual Studio Code extension journey — Intro","date":"September 12, 2019"}},"pageContext":{"id":"7bc0f02d-578b-584c-b975-1e0956b5a4a2","previousId":"a4a967b3-7bab-5a16-a596-cc255230f70b","nextId":"f3b96f7a-198d-563f-a7fb-c0e73e0feabd","maxWidth":1380,"slug":"notifications-in-chrome-extension"}},"staticQueryHashes":["2744905544","3090755652","4064581832","511549514","764694655"]}