<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.9"/><meta data-react-helmet="true" name="google-site-verification" content="hpJ5hHMHz7pz5hEBUsKSCUaVIZg8rMKiQ86uyqVuFw4"/><meta data-react-helmet="true" name="description" content="During the Covid 19 ‚Äúvacation‚Äù I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino. I wanted‚Ä¶"/><meta data-react-helmet="true" property="og:title" content="How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 1"/><meta data-react-helmet="true" property="og:description" content="During the Covid 19 ‚Äúvacation‚Äù I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino. I wanted‚Ä¶"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:creator" content="Moshe Feuchtwanger"/><meta data-react-helmet="true" name="twitter:title" content="How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 1"/><meta data-react-helmet="true" name="twitter:description" content="During the Covid 19 ‚Äúvacation‚Äù I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino. I wanted‚Ä¶"/><meta data-react-helmet="true" name="keywords" content="arduino,socketio,nodejs,games-consoles"/><meta data-react-helmet="true" name="og:image" content="https://moshfeu.github.io/static/ddb616af07bc62333e83c537c2b20521/a674a/0v-ekW736B6QzNRQT.jpg"/><meta data-react-helmet="true" name="og:image:alt" content="During the Covid 19 ‚Äúvacation‚Äù I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino. I wanted‚Ä¶"/><meta data-react-helmet="true" name="twitter:image" content="https://moshfeu.github.io/static/ddb616af07bc62333e83c537c2b20521/a674a/0v-ekW736B6QzNRQT.jpg"/><meta data-react-helmet="true" name="twitter:image:alt" content="During the Covid 19 ‚Äúvacation‚Äù I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino. I wanted‚Ä¶"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><style data-href="/styles.9c423fcc01d89e273043.css" data-identity="gatsby-global-css">:root{--reach-skip-nav:1}[data-reach-skip-nav-link]{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}[data-reach-skip-nav-link]:focus{clip:auto;background:#fff;height:auto;left:10px;padding:1rem;position:fixed;top:10px;width:auto;z-index:1}.link-module--link--bd3ac{color:var(--link-color);word-break:break-word}body{font-size:18px;line-height:1.5}body:not(.dark-mode){--dark-sky:#53bde6;--light-sky:#cdfdff;--planet-color:#ffe130;--link-color:#007acc;--text-color:inherit;--planet-emoji:"üï∂Ô∏è"}body.dark-mode{--dark-sky:#000;--light-sky:#122627;--planet-color:#fff;--link-color:#ffeb00;--text-color:#fffee9;--planet-emoji:"üëÄ"}video{width:100%}.header-module--header--1a727{--radius:60px;--dim:calc(var(--radius)*2);--position:-10px;background:linear-gradient(var(--dark-sky),var(--light-sky));color:var(--text-color);overflow:hidden;position:relative;transition:background .2s ease}.header-module--header--1a727 .header-module--toggle-dark--3b11c{background:radial-gradient(var(--radius) circle at var(--radius) var(--radius),var(--planet-color) 50%,transparent 100%);border:0;color:transparent;cursor:pointer;font-size:40px;height:var(--dim);outline:0;padding:0;position:absolute;right:0;top:0;transform:rotate(30deg) translate(10px,-50px);transition:background,color .2s ease;width:var(--dim)}.header-module--header--1a727 .header-module--toggle-dark--3b11c:focus,.header-module--header--1a727 .header-module--toggle-dark--3b11c:hover{color:#000}.header-module--header--1a727 .header-module--toggle-dark--3b11c span:before{content:var(--planet-emoji)}.header-module--header--1a727 a{align-items:center;box-shadow:none;color:inherit;display:inline-flex;text-decoration:none}.social-nav-module--link--a1fb1{margin:0 5px}.social-nav-module--link--a1fb1 svg{width:20px}body.dark-mode .social-nav-module--link--a1fb1 svg path{fill:#fff}.footer-module--footer--675c6{background:#000;box-shadow:0 0 10px #000;color:#b5e853;font-family:monospace;padding-block:15px;text-align:center}.footer-module--footer--675c6:before{background:radial-gradient(5px circle at 10px 10px,#fe6158 100%,transparent),radial-gradient(5px circle at 27px 10px,#febe2f 100%,transparent),radial-gradient(5px circle at 44px 10px,#28c940 100%,transparent);content:"";display:block;height:25px}.footer-module--footer--675c6 a,.footer-module--footer--675c6 a:link,.footer-module--footer--675c6 a:visited{color:#63c0f5}.footer-module--footer--675c6 .footer-module--no-copyright--7d572{vertical-align:middle}.layout-module--root--65bca{color:var(--text-color);display:flex;flex-direction:column;min-height:100vh}.layout-module--content--e6f14{background:linear-gradient(var(--light-sky) calc(100% - 60px),#8ab807 calc(100% - 40px),#563a2c calc(100% - 10px),#563a2c 100%);flex:1 1;padding-bottom:30px}.layout-module--content--e6f14 img{max-width:100%}.code-module--line-number-style--5b2b0{display:inline-block;opacity:.3;padding-left:1em;padding-right:1em;position:relative;text-align:center;-webkit-user-select:none;user-select:none}img+.em-module--em--86c77,span+.em-module--em--86c77{display:block;font-size:.9rem;padding-block:4px;text-align:center}</style><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 1 | Moshe Feuchtwanger</title><link data-react-helmet="true" rel="icon" type="image/png" href="/static/avatar-ff57f6a40c8eadde26a1de94865ca765.png"/><link data-react-helmet="true" rel="canonical" href="https://moshfeu.medium.com/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-1-c5067647ca51"/><link href="https://fonts.googleapis.com/css?family=Roboto:wght@300|Open+Sans&amp;display=swap" rel="stylesheet"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 1sbp79x">body{--theme-ui-colors-text:#282c35;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#007acc;--theme-ui-colors-secondary:#1B1F23;--theme-ui-colors-muted:hsla(0, 0%, 0%, 0.2);--theme-ui-colors-highlight:#00ff00;--theme-ui-colors-heading:#282c35;--theme-ui-colors-prism-background:#011627;--theme-ui-colors-prism-comment:#809393;--theme-ui-colors-prism-string:#addb67;--theme-ui-colors-prism-var:#d6deeb;--theme-ui-colors-prism-number:#f78c6c;--theme-ui-colors-prism-constant:#82aaff;--theme-ui-colors-prism-punctuation:#c792ea;--theme-ui-colors-prism-className:#ffc98b;--theme-ui-colors-prism-tag:#ffa7c4;--theme-ui-colors-prism-boolean:#ff5874;--theme-ui-colors-prism-property:#80cbc4;--theme-ui-colors-prism-namespace:#b2ccd6;--theme-ui-colors-prism-highlight:hsla(207, 95%, 15%, 1);color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}body.theme-ui-dark{--theme-ui-colors-text:rgba(255, 255, 255, 0.86);--theme-ui-colors-background:#232129;--theme-ui-colors-primary:#D9BAE8;--theme-ui-colors-secondary:rgba(255, 255, 255, 0.86);--theme-ui-colors-muted:hsla(0, 0%, 100%, 0.2);--theme-ui-colors-highlight:#663399;--theme-ui-colors-heading:#fff;}</style><style data-emotion="css-global 1rckfa9">*{box-sizing:border-box;}body{margin:0;font-family:Open Sans,Roboto,system-ui,sans-serif;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--root--65bca"><header class="header-module--header--1a727"><style data-emotion="css 13xn1c7">.css-13xn1c7{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}@media screen and (min-width: 40em){.css-13xn1c7{-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><div class="css-13xn1c7"><style data-emotion="css 1y5dmvz">.css-1y5dmvz{margin-top:0;margin-bottom:0;font-size:24px;}</style><style data-emotion="css 1qasgcb">.css-1qasgcb{box-sizing:border-box;margin:0;min-width:0;margin-top:0;margin-bottom:0;font-size:24px;}</style><div class="css-1qasgcb"><a href="/"><style data-emotion="css 19ns1mg">.css-19ns1mg{margin-right:8px;margin-bottom:0;width:48px;min-width:48px;border-radius:99999px;}</style><img src="/static/e981c1fbc840d15a0caabe830fa5674f/aff39/avatar.png" srcSet="/static/e981c1fbc840d15a0caabe830fa5674f/aff39/avatar.png 1x,
/static/e981c1fbc840d15a0caabe830fa5674f/e5b88/avatar.png 1.5x,
/static/e981c1fbc840d15a0caabe830fa5674f/88b72/avatar.png 2x" alt="Moshe Feuchtwanger" class="css-19ns1mg"/>Moshe Feuchtwanger</a></div></div><button aria-label="Toggle Dark Mode" class="header-module--toggle-dark--3b11c"><span></span></button></header><div class="layout-module--content--e6f14"><style data-emotion="css 1in33uw">.css-1in33uw{max-width:672px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;}</style><div class="css-1in33uw"><main><article><header><h1 class="css-0">How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 1</h1><style data-emotion="css rsra4b">.css-rsra4b{font-size:14px;margin-top:-16px;margin-bottom:16px;}</style><style data-emotion="css 1jnjfic">.css-1jnjfic{font-size:14px;margin-top:-16px;margin-bottom:16px;}.css-1jnjfic code{font-size:inherit;}</style><p class="css-1jnjfic">April 17, 2020</p><style data-emotion="css lgbo0i">.css-lgbo0i{box-sizing:border-box;margin:0;min-width:0;}</style><div class="css-lgbo0i"><a href="/tag/arduino"><style data-emotion="css 21clv8">.css-21clv8{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:bold;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary);margin-left:0;}</style><div class="css-21clv8">arduino</div></a><a href="/tag/socketio"><style data-emotion="css 8rl423">.css-8rl423{box-sizing:border-box;margin:0;min-width:0;display:inline-block;vertical-align:baseline;font-size:12px;font-weight:bold;white-space:nowrap;padding-left:4px;padding-right:4px;border-radius:2px;color:white;background-color:var(--theme-ui-colors-primary);margin-left:4px;}</style><div class="css-8rl423">socketio</div></a><a href="/tag/nodejs"><div class="css-8rl423">nodejs</div></a><a href="/tag/games-consoles"><div class="css-8rl423">games-consoles</div></a></div></header><style data-emotion="css 164r41r">.css-164r41r{margin-top:8px;}</style><div class="css-164r41r"><style data-emotion="css 1iclvjn">.css-1iclvjn{text-align:center;display:block;font-size:0.9rem;padding-block:4px;}</style><em class="css-1iclvjn">Photo by Daniel Andrade on Unsplash</em></div><section><style data-emotion="css 1ek8oqb">.css-1ek8oqb code{font-size:inherit;}</style><p class="css-1ek8oqb">During the Covid 19 ‚Äúvacation‚Äù I wanted to create a project for my 12 years old sun. He likes computer games and he likes Arduino.</p><p class="css-1ek8oqb">I wanted to focus on the connectivity and the Arduino part but not on developing the game itself. So the plan is to take an existing html5 game which controlled by keyboard and add the ability to control it from an external ‚Äúcontroller‚Äù which will be connected through a server to the game host using socket.</p><p class="css-1ek8oqb">Like any project, I like to do small steps. Do one simple step, make sure it‚Äôs working and ‚Äúcomplicate‚Äù it a bit more. There are the steps:</p><ul class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb">First, control it from a different browser window using the same keyboard keys.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Then, control it from a mobile phone on the same network of course.</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb">Finally, control it through an nodemcu esp8266 controller which has a builtin wifi module to make it easier to establish a connection.</p></li></ul><p class="css-1ek8oqb">I was looking for a very simple light weight html5 game. As less dependencies as possible. The chosen game‚Ä¶ <a class="link-module--link--bd3ac" href="https://github.com/cykod/AlienInvasion" target="_blank" rel="noopener noreferrer">https://github.com/cykod/AlienInvasion</a> (it‚Äôs an old one, I know)</p><style data-emotion="css 17gfwuz">.css-17gfwuz{pointer-events:painted;}.css-17gfwuz a{visibility:hidden;}.css-17gfwuz:hover a{visibility:visible;}</style><h2 class="css-17gfwuz"><style data-emotion="css yixlj4">.css-yixlj4{margin-left:-20px;padding-right:4px;color:var(--theme-ui-colors-primary);}</style><a href="#undefined" aria-label="Installing dependencies" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing dependencies</h2><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token function" style="color:rgb(130, 170, 255)">yarn</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token plain"> express socket.io @types/socket @types/express</span></div></pre></div><p class="css-1ek8oqb">I like types..</p><h2 class="css-17gfwuz"><a href="#undefined" aria-label="Control the game from a different window" class="css-yixlj4"><svg viewBox="0 0 16 16" width="16" height="16" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Control the game from a different window</h2><p class="css-1ek8oqb">Currently, the user can control the game using the keyboard. The idea is to ‚Äúsend‚Äù the event from the controller to the game. While it‚Äôs not possible to send the <strong class="css-0">actual</strong> event over socket, I‚Äôll send only <style data-emotion="css 118aluo">.css-118aluo{border-radius:0.3em;color:var(--theme-ui-colors-secondary);background-color:var(--theme-ui-colors-highlight);padding-top:0.15em;padding-bottom:0.05em;padding-left:0.2em;padding-right:0.2em;}</style><code class="css-118aluo">code</code> and <code class="css-118aluo">keyCode</code> to the server. Those will be enough for dispatching the event in the game.</p><p class="css-1ek8oqb">Let‚Äôs start from the server. To establish a socket, as the post‚Äôs title mention, I‚Äôm using NodeJS and socket.io. The server also will serve the ‚Äústatics‚Äù ‚Äî html and js files.</p><p class="css-1ek8oqb">Since I‚Äôm new in socket.io, I‚Äôm following the ‚Äú<a class="link-module--link--bd3ac" href="https://socket.io/get-started/chat/" target="_blank" rel="noopener noreferrer">Getting Started</a>‚Äù guide.
First thing is to run an express server</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> express </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;express&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">express</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> http </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;http&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">createServer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> io </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;socket.io&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">express</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">static</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">9</span><span class="token plain">  res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">sendFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname </span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;/index.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">10</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">12</span><span class="token plain">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;connection&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">13</span><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;a user connected&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">14</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">16</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">3000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">17</span><span class="token plain">  </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;listening on *:3000&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">18</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">This is the very basic code to establish a socket connection.</p><p class="css-1ek8oqb">Now, the server should listen to events through socket from the controller and ‚Äútransmit‚Äù to the game.</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token plain">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;connection&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain">  socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;event&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token parameter">message</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain">    socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">broadcast</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">emit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;event&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">Notice that I‚Äôm using <code class="css-118aluo">socket.broadcast.emit</code> . This way it will send the events ‚Äúto all clients except sender‚Äù.</p><p class="css-1ek8oqb">Next thing is connecting the clients. The first connection is very simple:</p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> socket </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb">I‚Äôm adding 2 files to the project (except the server code and package.json and.. well you get my point)</p><ul class="css-0"><li class="css-1ek8oqb"><p class="css-1ek8oqb"><em class="em-module--em--86c77">controller.html</em> ‚Äî to demonstrate.. well.. the controller (which will be the Arduino eventually).</p></li><li class="css-1ek8oqb"><p class="css-1ek8oqb"><em class="em-module--em--86c77">remotely.js</em> ‚Äî for taking care of the ‚Äúremote‚Äù layer. Will be added to the game file.</p></li></ul><p class="css-1ek8oqb">Currently, I want to make sure that both of the clients are connected over socket.</p><p class="css-1ek8oqb"><em class="em-module--em--86c77">controller.html</em></p><div class="gatsby-highlight" data-language="html"><pre class="prism-code language-html" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain">Start</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">button</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token script language-javascript">  </span><span class="token script language-javascript keyword" style="color:rgb(127, 219, 202)">const</span><span class="token script language-javascript"> socket </span><span class="token script language-javascript operator" style="color:rgb(127, 219, 202)">=</span><span class="token script language-javascript"> </span><span class="token script language-javascript function" style="color:rgb(130, 170, 255)">io</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token script language-javascript">  </span><span class="token script language-javascript dom variable" style="color:rgb(214, 222, 235)">document</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">querySelector</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;button&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;click&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript"> </span><span class="token script language-javascript arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token script language-javascript"> </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token script language-javascript">    socket</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token script language-javascript method function property-access" style="color:rgb(130, 170, 255)">emit</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;key&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token script language-javascript"> </span><span class="token script language-javascript string" style="color:rgb(173, 219, 103)">&#x27;start&#x27;</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token script language-javascript">  </span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token script language-javascript punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token script language-javascript"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token script language-javascript"></span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&lt;/</span><span class="token tag" style="color:rgb(127, 219, 202)">script</span><span class="token tag punctuation" style="color:rgb(199, 146, 234)">&gt;</span></div></pre></div><p class="css-1ek8oqb"><em class="em-module--em--86c77">remotely.js</em></p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> socket </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">io</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;key&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token console class-name" style="color:rgb(255, 203, 139)">console</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb"><img src="/8472a3f7db76c910cfbce5556a8a226c/1bfXyAsxD4ULJgpS2oYdKfA.gif" alt="Click on ‚Äústart‚Äù in the controller, create‚Äôs a log in the game" class="css-0"/><em class="em-module--em--86c77">Click on ‚Äústart‚Äù in the controller, create‚Äôs a log in the game</em></p><p class="css-1ek8oqb">Next step will be to actually ‚Äútransmit‚Äù the ‚Äúevents‚Äù from the controller to the game</p><p class="css-1ek8oqb"><em class="em-module--em--86c77">controller.html</em></p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token keyword" style="color:rgb(127, 219, 202)">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">isRelevantKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain">  </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;ArrowRight&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;ArrowLeft&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27; &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">includes</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;keydown&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;keyup&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">forEach</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">type</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain">  </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">addEventListener</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> keyCode</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">isRelevantKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">8</span><span class="token plain">      socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">emit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;event&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> keyCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">9</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">10</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">11</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb"><em class="em-module--em--86c77">remotely.js</em></p><div class="gatsby-highlight" data-language="js"><pre class="prism-code language-js" style="color:#d6deeb;background-color:#011627;overflow-x:auto"><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">1</span><span class="token plain">socket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&#x27;event&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token parameter">type</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> key</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> keyCode</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(127, 219, 202)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">2</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">const</span><span class="token plain"> evt </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">KeyboardEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">3</span><span class="token plain">    key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">4</span><span class="token plain">    keyCode</span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">5</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">6</span><span class="token plain">  </span><span class="token dom variable" style="color:rgb(214, 222, 235)">window</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">dispatchEvent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">evt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="code-module--line-number-style--5b2b0">7</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre></div><p class="css-1ek8oqb"><img src="/e4f39b926d00f637f9ea1e748fc40919/1O4N3f5CKhVjcS2DNVwBHgw.gif" alt="Pressing on the keyboard while controller.html is in focus, moves the mothership in the game window" class="css-0"/><em class="em-module--em--86c77">Pressing on the keyboard while controller.html is in focus, moves the mothership in the game window</em></p><p class="css-1ek8oqb">In the next post I‚Äôll start the second step ‚Äî turn my mobile phone to a controller and then will come the interesting part. To make it more interesting, I‚Äôll add try to add a ‚Äújoystick‚Äù UI to it. I hope to find a ready one ü§û</p><p class="css-1ek8oqb">Feel free to review the <a class="link-module--link--bd3ac" href="https://github.com/moshfeu/AlienInvasion" target="_blank" rel="noopener noreferrer">source code</a> and the relevant <a class="link-module--link--bd3ac" href="https://github.com/moshfeu/AlienInvasion/commit/f6772b09d48f06b277398e0065644e26073eb208" target="_blank" rel="noopener noreferrer">commit</a> on Github.</p><p class="css-1ek8oqb">Have something to say? I‚Äôd love to üëÇ
<a class="link-module--link--bd3ac" href="https://twitter.com/moshfeu" target="_blank" rel="noopener noreferrer">https://twitter.com/moshfeu</a></p><a class="link-module--link--bd3ac" href="https://moshfeu.medium.com/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-1-c5067647ca51" target="_blank" rel="noopener noreferrer">Original Post</a></section></article></main></div></div><footer class="footer-module--footer--675c6"><style data-emotion="css 1jso6df">.css-1jso6df{-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:8px;}</style><style data-emotion="css diw1ju">.css-diw1ju{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;list-style:none;padding:8px;}</style><ul class="css-diw1ju"><li><a rel="prev" href="/how-to-post-code-snippet-and-run-it/">‚Üê <!-- -->How to post code snippet and run it</a></li><li><a rel="next" href="/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-2/">How to build an HTML5 game‚Äôs controller with Arduino, NodeJS and socket.io‚Ää‚Äî‚ÄäPart 2<!-- --> ‚Üí</a></li></ul><span class="footer-module--no-copyright--7d572" title="No Copyright Intended"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve" width="20" height="20" fill="#b5e853"><g><path d="M0,256c0.02,141.39,114.61,255.98,256,256c141.39-0.02,255.98-114.61,256-256C511.98,114.61,397.39,0.02,256,0   C114.61,0.02,0.02,114.61,0,256c0,14.14,11.46,25.6,25.6,25.6s25.6-11.46,25.6-25.6c0.01-56.64,22.88-107.67,59.98-144.82   C148.33,74.08,199.36,51.21,256,51.2c56.63,0.01,107.67,22.88,144.82,59.98c37.1,37.14,59.97,88.18,59.98,144.82   c-0.01,56.63-22.88,107.67-59.98,144.82c-37.14,37.1-88.18,59.97-144.82,59.98c-56.64-0.01-107.67-22.88-144.82-59.98   C74.08,363.67,51.21,312.64,51.2,256c0-14.14-11.46-25.6-25.6-25.6S0,241.86,0,256L0,256z"></path><path d="M324.1,179.17c-19.42-17.08-43.77-25.61-67.85-25.58c-26.93-0.03-53.98,10.63-74.06,31.48l0,0   c-19.04,19.74-28.64,45.44-28.62,70.94c-0.03,25.49,9.58,51.2,28.62,70.94l0,0c20.08,20.85,47.13,31.51,74.06,31.48   c24.08,0.02,48.43-8.5,67.85-25.58c10.62-9.33,11.66-25.51,2.33-36.13c-9.33-10.62-25.51-11.66-36.13-2.33   c-9.84,8.64-21.87,12.82-34.05,12.84c-13.64-0.03-27.03-5.27-37.19-15.8l0,0c-9.57-9.94-14.26-22.57-14.28-35.41   c0.03-12.84,4.72-25.47,14.28-35.41l0,0c10.16-10.53,23.55-15.78,37.19-15.8c12.19,0.02,24.21,4.21,34.05,12.84   c10.62,9.33,26.8,8.29,36.13-2.33C335.76,204.68,334.72,188.5,324.1,179.17L324.1,179.17z"></path><path d="M84.3,120.5l38.4,38.4c10,10,26.21,10,36.2,0c10-10,10-26.21,0-36.2l-38.4-38.4c-10-10-26.21-10-36.2,0   S74.3,110.5,84.3,120.5"></path><path d="M353.1,389.3l38.4,38.4c10,10,26.21,10,36.2,0c10-10,10-26.21,0-36.2l-38.4-38.4c-10-10-26.21-10-36.2,0   S343.1,379.3,353.1,389.3"></path></g></svg></span> <!-- -->2026<!-- --> - Moshe Feuchtwanger</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118358576-1"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-118358576-1', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/how-to-build-an-html5-games-controller-with-arduino-nodejs-and-socket-io-part-1/";window.___webpackCompilationHash="32a63582809edb8b3488";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-c36d90ce4a49d54da991.js"],"component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js":["/component---node-modules-gatsby-theme-blog-core-src-templates-posts-query-js-ceb13f80f566e4cd42ed.js"],"component---src-components-post-js":["/component---src-components-post-js-6709b8098da66a2f4c52.js"],"component---src-pages-404-js":["/component---src-pages-404-js-4d725be78be32f2431c8.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-1adffd399be1b88f9c9a.js"]};/*]]>*/</script><script src="/app-c36d90ce4a49d54da991.js" async=""></script><script src="/framework-4b792b97593cf52a3906.js" async=""></script><script src="/webpack-runtime-21f07d3f8a0b161dacb0.js" async=""></script></body></html>